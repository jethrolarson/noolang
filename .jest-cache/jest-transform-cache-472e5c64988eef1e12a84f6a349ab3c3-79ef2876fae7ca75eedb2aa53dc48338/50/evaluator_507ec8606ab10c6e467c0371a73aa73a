c41c424fd9e1b527ba45197325790a22
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Evaluator = exports.createConstructor = exports.isConstructor = exports.createUnit = exports.isUnit = exports.createTuple = exports.isTuple = exports.createNativeFunction = exports.isNativeFunction = exports.createFunction = exports.isFunction = exports.createRecord = exports.isRecord = exports.createList = exports.isList = exports.boolValue = exports.isBool = exports.createBool = exports.createFalse = exports.createTrue = exports.createString = exports.isString = exports.createNumber = exports.isNumber = exports.createCell = exports.isCell = void 0;
const defaultFs = __importStar(require("node:fs"));
const defaultPath = __importStar(require("node:path"));
const errors_1 = require("./errors");
const format_1 = require("./format");
const lexer_1 = require("./lexer");
const parser_1 = require("./parser/parser");
const isCell = (val) => val && typeof val === "object" && val.cell === true && "value" in val;
exports.isCell = isCell;
const createCell = (value) => ({ cell: true, value });
exports.createCell = createCell;
const isNumber = (value) => value.tag === "number";
exports.isNumber = isNumber;
const createNumber = (value) => ({
    tag: "number",
    value,
});
exports.createNumber = createNumber;
const isString = (value) => value.tag === "string";
exports.isString = isString;
const createString = (value) => ({
    tag: "string",
    value,
});
exports.createString = createString;
const createTrue = () => ({
    tag: "constructor",
    name: "True",
    args: [],
});
exports.createTrue = createTrue;
const createFalse = () => ({
    tag: "constructor",
    name: "False",
    args: [],
});
exports.createFalse = createFalse;
const createBool = (value) => (0, exports.createConstructor)(value ? "True" : "False", []);
exports.createBool = createBool;
const isBool = (value) => value.tag === "constructor" &&
    (value.name === "True" || value.name === "False");
exports.isBool = isBool;
const boolValue = (value) => {
    if (value.tag === "constructor" && value.name === "True")
        return true;
    if (value.tag === "constructor" && value.name === "False")
        return false;
    throw new Error(`Expected Bool constructor, got ${value.tag}`);
};
exports.boolValue = boolValue;
const isList = (value) => value.tag === "list";
exports.isList = isList;
const createList = (values) => ({ tag: "list", values });
exports.createList = createList;
const isRecord = (value) => value.tag === "record";
exports.isRecord = isRecord;
const createRecord = (fields) => ({
    tag: "record",
    fields,
});
exports.createRecord = createRecord;
const isFunction = (value) => value.tag === "function";
exports.isFunction = isFunction;
const createFunction = (fn) => ({
    tag: "function",
    fn,
});
exports.createFunction = createFunction;
const isNativeFunction = (value) => value.tag === "native";
exports.isNativeFunction = isNativeFunction;
const createNativeFunction = (name, fn) => {
    const wrap = (fn, curriedName) => ({
        tag: "native",
        name: curriedName,
        fn: (...args) => {
            const result = fn(...args);
            if (typeof result === "function") {
                return wrap(result, curriedName + "_curried");
            }
            return result;
        },
    });
    return wrap(fn, name);
};
exports.createNativeFunction = createNativeFunction;
const isTuple = (value) => value.tag === "tuple";
exports.isTuple = isTuple;
const createTuple = (values) => ({
    tag: "tuple",
    values,
});
exports.createTuple = createTuple;
const isUnit = (value) => value.tag === "unit";
exports.isUnit = isUnit;
const createUnit = () => ({ tag: "unit" });
exports.createUnit = createUnit;
const isConstructor = (value) => value.tag === "constructor";
exports.isConstructor = isConstructor;
const createConstructor = (name, args) => ({
    tag: "constructor",
    name,
    args,
});
exports.createConstructor = createConstructor;
// Helper to flatten semicolon-separated binary expressions into individual statements
const flattenStatements = (expr) => {
    if (expr.kind === "binary" && expr.operator === ";") {
        return [...flattenStatements(expr.left), ...flattenStatements(expr.right)];
    }
    return [expr];
};
class Evaluator {
    constructor(opts) {
        this.fs = opts?.fs ?? defaultFs;
        this.path = opts?.path ?? defaultPath;
        this.environment = new Map();
        this.environmentStack = [];
        this.initializeBuiltins();
        this.loadStdlib();
    }
    initializeBuiltins() {
        // Arithmetic operations
        this.environment.set('+', (0, exports.createNativeFunction)('+', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createNumber)(a.value + b.value);
            throw new Error(`Cannot add ${a?.tag || 'unit'} and ${b?.tag || 'unit'}`);
        }));
        this.environment.set('-', (0, exports.createNativeFunction)('-', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createNumber)(a.value - b.value);
            throw new Error(`Cannot subtract ${b?.tag || 'unit'} from ${a?.tag || 'unit'}`);
        }));
        this.environment.set('*', (0, exports.createNativeFunction)('*', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createNumber)(a.value * b.value);
            throw new Error(`Cannot multiply ${a?.tag || 'unit'} and ${b?.tag || 'unit'}`);
        }));
        this.environment.set('/', (0, exports.createNativeFunction)('/', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b)) {
                if (b.value === 0) {
                    const error = (0, errors_1.createError)('RuntimeError', 'Division by zero', undefined, `${a.value} / ${b.value}`, 'Check that the divisor is not zero before dividing');
                    throw error;
                }
                return (0, exports.createNumber)(a.value / b.value);
            }
            throw new Error(`Cannot divide ${a?.tag || 'unit'} by ${b?.tag || 'unit'}`);
        }));
        // Comparison operations
        this.environment.set('==', (0, exports.createNativeFunction)('==', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b)) {
                return (0, exports.createBool)(a.value === b.value);
            }
            else if ((0, exports.isString)(a) && (0, exports.isString)(b)) {
                return (0, exports.createBool)(a.value === b.value);
            }
            else if ((0, exports.isBool)(a) && (0, exports.isBool)(b)) {
                return (0, exports.createBool)((0, exports.boolValue)(a) === (0, exports.boolValue)(b));
            }
            else if ((0, exports.isUnit)(a) && (0, exports.isUnit)(b)) {
                return (0, exports.createTrue)();
            }
            else if ((0, exports.isUnit)(a) || (0, exports.isUnit)(b)) {
                return (0, exports.createFalse)();
            }
            return (0, exports.createFalse)();
        }));
        this.environment.set('!=', (0, exports.createNativeFunction)('!=', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b)) {
                return (0, exports.createBool)(a.value !== b.value);
            }
            else if ((0, exports.isString)(a) && (0, exports.isString)(b)) {
                return (0, exports.createBool)(a.value !== b.value);
            }
            else if ((0, exports.isBool)(a) && (0, exports.isBool)(b)) {
                return (0, exports.createBool)((0, exports.boolValue)(a) !== (0, exports.boolValue)(b));
            }
            else if ((0, exports.isUnit)(a) && (0, exports.isUnit)(b)) {
                return (0, exports.createFalse)();
            }
            else if ((0, exports.isUnit)(a) || (0, exports.isUnit)(b)) {
                return (0, exports.createTrue)();
            }
            return (0, exports.createTrue)();
        }));
        this.environment.set('<', (0, exports.createNativeFunction)('<', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createBool)(a.value < b.value);
            throw new Error(`Cannot compare ${typeof a} and ${typeof b}`);
        }));
        this.environment.set('>', (0, exports.createNativeFunction)('>', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createBool)(a.value > b.value);
            throw new Error(`Cannot compare ${typeof a} and ${typeof b}`);
        }));
        this.environment.set('<=', (0, exports.createNativeFunction)('<=', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createBool)(a.value <= b.value);
            throw new Error(`Cannot compare ${typeof a} and ${typeof b}`);
        }));
        this.environment.set('>=', (0, exports.createNativeFunction)('>=', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createBool)(a.value >= b.value);
            throw new Error(`Cannot compare ${typeof a} and ${typeof b}`);
        }));
        // Pipeline operator
        this.environment.set('|', (0, exports.createNativeFunction)('|', (value) => (func) => {
            if ((0, exports.isFunction)(func))
                return func.fn(value);
            throw new Error(`Cannot apply non-function in thrush: ${func?.tag || 'unit'}`);
        }));
        // Left-to-right composition
        this.environment.set('|>', (0, exports.createNativeFunction)('|>', (f) => (g) => {
            if ((0, exports.isFunction)(f) && (0, exports.isFunction)(g)) {
                return (0, exports.createFunction)((x) => g.fn(f.fn(x)));
            }
            throw new Error(`Cannot compose non-functions: ${f?.tag || 'unit'} and ${g?.tag || 'unit'}`);
        }));
        // Right-to-left composition
        this.environment.set('<|', (0, exports.createNativeFunction)('<|', (f) => (g) => {
            if ((0, exports.isFunction)(f) && (0, exports.isFunction)(g)) {
                return (0, exports.createFunction)((x) => f.fn(g.fn(x)));
            }
            throw new Error(`Cannot compose non-functions: ${f?.tag || 'unit'} and ${g?.tag || 'unit'}`);
        }));
        // Semicolon operator
        this.environment.set(';', (0, exports.createNativeFunction)(';', (_left) => (right) => right));
        // Dollar operator (low precedence function application)
        this.environment.set('$', (0, exports.createNativeFunction)('$', (func) => (arg) => {
            if ((0, exports.isFunction)(func))
                return func.fn(arg);
            if ((0, exports.isNativeFunction)(func))
                return func.fn(arg);
            throw new Error(`Cannot apply non-function in dollar operator: ${func?.tag || 'unit'}`);
        }));
        // List operations - minimal built-ins for self-hosted functions
        this.environment.set('list_get', (0, exports.createNativeFunction)('list_get', (index) => (list) => {
            if ((0, exports.isNumber)(index) && (0, exports.isList)(list)) {
                const idx = index.value;
                if (idx >= 0 && idx < list.values.length) {
                    return list.values[idx];
                }
            }
            throw new Error('list_get: invalid index or not a list');
        }));
        // List operations
        this.environment.set('tail', (0, exports.createNativeFunction)('tail', (list) => {
            if ((0, exports.isList)(list) && list.values.length > 0)
                return (0, exports.createList)(list.values.slice(1));
            throw new Error('Cannot get tail of empty list or non-list');
        }));
        this.environment.set('cons', (0, exports.createNativeFunction)('cons', (head) => (tail) => {
            if ((0, exports.isList)(tail))
                return (0, exports.createList)([head, ...tail.values]);
            throw new Error('Second argument to cons must be a list');
        }));
        // List utility functions
        this.environment.set('map', (0, exports.createNativeFunction)('map', (func) => (list) => {
            if ((0, exports.isFunction)(func) && (0, exports.isList)(list)) {
                return (0, exports.createList)(list.values.map((item) => func.fn(item)));
            }
            throw new Error('map requires a function and a list');
        }));
        this.environment.set('filter', (0, exports.createNativeFunction)('filter', (pred) => (list) => {
            if ((0, exports.isFunction)(pred) && (0, exports.isList)(list)) {
                return (0, exports.createList)(list.values.filter((item) => {
                    const result = pred.fn(item);
                    if ((0, exports.isBool)(result)) {
                        return (0, exports.boolValue)(result);
                    }
                    // For non-boolean results, treat as truthy/falsy
                    return !(0, exports.isUnit)(result);
                }));
            }
            throw new Error('filter requires a predicate function and a list');
        }));
        this.environment.set('reduce', (0, exports.createNativeFunction)('reduce', (func) => (initial) => (list) => {
            if ((0, exports.isFunction)(func) && (0, exports.isList)(list)) {
                return list.values.reduce((acc, item) => {
                    const partial = func.fn(acc);
                    if ((0, exports.isFunction)(partial)) {
                        return partial.fn(item);
                    }
                    throw new Error('reduce function must return a function after first argument');
                }, initial);
            }
            throw new Error('reduce requires a function, initial value, and a list');
        }));
        this.environment.set('length', (0, exports.createNativeFunction)('length', (list) => {
            if ((0, exports.isList)(list))
                return (0, exports.createNumber)(list.values.length);
            throw new Error('length requires a list');
        }));
        this.environment.set('isEmpty', (0, exports.createNativeFunction)('isEmpty', (list) => {
            if ((0, exports.isList)(list))
                return (0, exports.createBool)(list.values.length === 0);
            throw new Error('isEmpty requires a list');
        }));
        this.environment.set('append', (0, exports.createNativeFunction)('append', (list1) => (list2) => {
            if ((0, exports.isList)(list1) && (0, exports.isList)(list2))
                return (0, exports.createList)([...list1.values, ...list2.values]);
            throw new Error('append requires two lists');
        }));
        // Math utilities
        this.environment.set('abs', (0, exports.createNativeFunction)('abs', (n) => {
            if ((0, exports.isNumber)(n))
                return (0, exports.createNumber)(Math.abs(n.value));
            throw new Error('abs requires a number');
        }));
        this.environment.set('max', (0, exports.createNativeFunction)('max', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createNumber)(Math.max(a.value, b.value));
            throw new Error('max requires two numbers');
        }));
        this.environment.set('min', (0, exports.createNativeFunction)('min', (a) => (b) => {
            if ((0, exports.isNumber)(a) && (0, exports.isNumber)(b))
                return (0, exports.createNumber)(Math.min(a.value, b.value));
            throw new Error('min requires two numbers');
        }));
        // Effectful functions
        this.environment.set('print', (0, exports.createNativeFunction)('print', (value) => {
            console.log((0, format_1.formatValue)(value));
            return value; // Return the value that was printed
        }));
        // String utilities
        this.environment.set('concat', (0, exports.createNativeFunction)('concat', (a) => (b) => {
            if ((0, exports.isString)(a) && (0, exports.isString)(b))
                return (0, exports.createString)(a.value + b.value);
            throw new Error('concat requires two strings');
        }));
        this.environment.set('toString', (0, exports.createNativeFunction)('toString', (value) => (0, exports.createString)(valueToString(value))));
        // Record utilities
        this.environment.set('hasKey', (0, exports.createNativeFunction)('hasKey', (record) => (key) => {
            if ((0, exports.isRecord)(record) && (0, exports.isString)(key)) {
                return (0, exports.createBool)(key.value in record.fields);
            }
            throw new Error('hasKey requires a record and a string key');
        }));
        this.environment.set('hasValue', (0, exports.createNativeFunction)('hasValue', (record) => (value) => {
            if ((0, exports.isRecord)(record)) {
                return (0, exports.createBool)(Object.values(record.fields).includes(value));
            }
            throw new Error('hasValue requires a record');
        }));
        this.environment.set('set', (0, exports.createNativeFunction)('set', (accessor) => (record) => (newValue) => {
            if ((0, exports.isNativeFunction)(accessor) && (0, exports.isRecord)(record)) {
                // For now, just handle simple field accessors
                const field = accessor.name?.replace('@', '');
                if (field) {
                    return (0, exports.createRecord)({ ...record.fields, [field]: newValue });
                }
            }
            throw new Error('set requires an accessor, record, and new value');
        }));
        // Tuple operations
        this.environment.set('tupleLength', (0, exports.createNativeFunction)('tupleLength', (tuple) => {
            if ((0, exports.isTuple)(tuple)) {
                return (0, exports.createNumber)(tuple.values.length);
            }
            throw new Error('tupleLength requires a tuple');
        }));
        this.environment.set('tupleIsEmpty', (0, exports.createNativeFunction)('tupleIsEmpty', (tuple) => {
            if ((0, exports.isTuple)(tuple)) {
                return (0, exports.createBool)(tuple.values.length === 0);
            }
            throw new Error('tupleIsEmpty requires a tuple');
        }));
        // Built-in ADT constructors are now self-hosted in stdlib.noo
        // Option utility functions
        this.environment.set('isSome', (0, exports.createNativeFunction)('isSome', (option) => {
            if ((0, exports.isConstructor)(option) && option.name === 'Some') {
                return (0, exports.createTrue)();
            }
            else if ((0, exports.isConstructor)(option) && option.name === 'None') {
                return (0, exports.createFalse)();
            }
            throw new Error('isSome requires an Option value');
        }));
        this.environment.set('isNone', (0, exports.createNativeFunction)('isNone', (option) => {
            if ((0, exports.isConstructor)(option) && option.name === 'None') {
                return (0, exports.createTrue)();
            }
            else if ((0, exports.isConstructor)(option) && option.name === 'Some') {
                return (0, exports.createFalse)();
            }
            throw new Error('isNone requires an Option value');
        }));
        this.environment.set('unwrap', (0, exports.createNativeFunction)('unwrap', (option) => {
            if ((0, exports.isConstructor)(option) &&
                option.name === 'Some' &&
                option.args.length === 1) {
                return option.args[0];
            }
            else if ((0, exports.isConstructor)(option) && option.name === 'None') {
                throw new Error('Cannot unwrap None value');
            }
            throw new Error('unwrap requires a Some value');
        }));
        // Result utility functions
        this.environment.set('isOk', (0, exports.createNativeFunction)('isOk', (result) => {
            if ((0, exports.isConstructor)(result) && result.name === 'Ok') {
                return (0, exports.createTrue)();
            }
            else if ((0, exports.isConstructor)(result) && result.name === 'Err') {
                return (0, exports.createFalse)();
            }
            throw new Error('isOk requires a Result value');
        }));
        this.environment.set('isErr', (0, exports.createNativeFunction)('isErr', (result) => {
            if ((0, exports.isConstructor)(result) && result.name === 'Err') {
                return (0, exports.createTrue)();
            }
            else if ((0, exports.isConstructor)(result) && result.name === 'Ok') {
                return (0, exports.createFalse)();
            }
            throw new Error('isErr requires a Result value');
        }));
        // Missing builtin implementations
        this.environment.set('println', (0, exports.createNativeFunction)('println', (value) => {
            console.log(valueToString(value));
            return value;
        }));
        this.environment.set('readFile', (0, exports.createNativeFunction)('readFile', (path) => {
            if (!(0, exports.isString)(path)) {
                throw new Error('readFile requires a string path');
            }
            try {
                const content = this.fs.readFileSync(path.value, 'utf-8');
                return (0, exports.createString)(content);
            }
            catch (error) {
                throw new Error(`Failed to read file: ${error}`);
            }
        }));
        this.environment.set('writeFile', (0, exports.createNativeFunction)('writeFile', (path) => (content) => {
            if (!(0, exports.isString)(path)) {
                throw new Error('writeFile requires a string path');
            }
            if (!(0, exports.isString)(content)) {
                throw new Error('writeFile requires string content');
            }
            try {
                this.fs.writeFileSync(path.value, content.value);
                return (0, exports.createUnit)();
            }
            catch (error) {
                throw new Error(`Failed to write file: ${error}`);
            }
        }));
        this.environment.set('log', (0, exports.createNativeFunction)('log', (message) => {
            if (!(0, exports.isString)(message)) {
                throw new Error('log requires a string message');
            }
            console.log(`[LOG] ${message.value}`);
            return (0, exports.createUnit)();
        }));
        this.environment.set('random', (0, exports.createNativeFunction)('random', () => {
            return (0, exports.createNumber)(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER));
        }));
        this.environment.set('randomRange', (0, exports.createNativeFunction)('randomRange', (min) => (max) => {
            if (!(0, exports.isNumber)(min) || !(0, exports.isNumber)(max)) {
                throw new Error('randomRange requires number arguments');
            }
            const minVal = Math.min(min.value, max.value);
            const maxVal = Math.max(min.value, max.value);
            return (0, exports.createNumber)(Math.floor(Math.random() * (maxVal - minVal + 1)) + minVal);
        }));
        this.environment.set('mutSet', (0, exports.createNativeFunction)('mutSet', (ref) => (value) => {
            if (!(0, exports.isCell)(ref)) {
                throw new Error('mutSet requires a mutable reference');
            }
            ref.value = value;
            return (0, exports.createUnit)();
        }));
        this.environment.set('mutGet', (0, exports.createNativeFunction)('mutGet', (ref) => {
            if (!(0, exports.isCell)(ref)) {
                throw new Error('mutGet requires a mutable reference');
            }
            return ref.value;
        }));
    }
    loadStdlib() {
        // Try multiple possible paths for stdlib.noo
        const possiblePaths = [
            this.path.join(__dirname, '..', 'stdlib.noo'),
            this.path.join(process.cwd(), 'stdlib.noo'),
            this.path.join(process.cwd(), 'src', '..', 'stdlib.noo'),
        ];
        let stdlibPath = null;
        for (const path of possiblePaths) {
            if (this.fs.existsSync(path)) {
                stdlibPath = path;
                break;
            }
        }
        if (!stdlibPath) {
            const msg = `[Noolang ERROR] Could not find stdlib.noo in any of these paths:\n  ${possiblePaths.join('\n  ')}`;
            console.error(msg);
            throw new Error(msg);
        }
        const stdlibContent = this.fs.readFileSync(stdlibPath, 'utf-8');
        const lexer = new lexer_1.Lexer(stdlibContent);
        const tokens = lexer.tokenize();
        const stdlibProgram = (0, parser_1.parse)(tokens);
        const allStatements = [];
        for (const statement of stdlibProgram.statements) {
            allStatements.push(...flattenStatements(statement));
        }
        for (const statement of allStatements) {
            this.evaluateExpression(statement);
        }
    }
    evaluateProgram(program, filePath) {
        if (filePath) {
            this.currentFileDir = this.path.dirname(this.path.resolve(filePath));
        }
        const executionTrace = [];
        if (program.statements.length === 0) {
            return {
                finalResult: (0, exports.createList)([]),
                executionTrace,
                environment: new Map(Array.from(this.environment.entries()).map(([k, v]) => [
                    k,
                    (0, exports.isCell)(v) ? v.value : v,
                ])),
            };
        }
        let finalResult = (0, exports.createList)([]);
        for (const statement of program.statements) {
            const result = this.evaluateExpression(statement);
            // Add to execution trace
            executionTrace.push({
                expression: this.expressionToString(statement),
                result: result,
                location: {
                    line: statement.location.start.line,
                    column: statement.location.start.column,
                },
            });
            finalResult = result;
        }
        return {
            finalResult,
            executionTrace,
            environment: new Map(Array.from(this.environment.entries()).map(([k, v]) => [
                k,
                (0, exports.isCell)(v) ? v.value : v,
            ])),
        };
    }
    evaluateDefinition(def) {
        // Check if this definition might be recursive by looking for the name in the value
        const isRecursive = this.containsVariable(def.value, def.name);
        if (isRecursive) {
            // For recursive definitions, we need a placeholder that gets updated
            const cell = (0, exports.createCell)((0, exports.createUnit)());
            this.environment.set(def.name, cell);
            const value = this.evaluateExpression(def.value);
            cell.value = value;
            return value;
        }
        else {
            // For non-recursive definitions, store the value directly
            const value = this.evaluateExpression(def.value);
            this.environment.set(def.name, value);
            return value;
        }
    }
    evaluateMutableDefinition(expr) {
        // Evaluate the right-hand side
        const value = this.evaluateExpression(expr.value);
        // Store a cell in the environment
        this.environment.set(expr.name, (0, exports.createCell)(value));
        return value;
    }
    evaluateMutation(expr) {
        // Look up the variable in the environment
        const cell = this.environment.get(expr.target);
        if (!(0, exports.isCell)(cell)) {
            throw new Error(`Cannot mutate non-mutable variable: ${expr.target}`);
        }
        // Evaluate the new value
        const value = this.evaluateExpression(expr.value);
        // Update the cell's value
        cell.value = value;
        return value;
    }
    evaluateExpression(expr) {
        switch (expr.kind) {
            case "literal":
                return this.evaluateLiteral(expr);
            case "variable":
                return this.evaluateVariable(expr);
            case "function":
                return this.evaluateFunction(expr);
            case "application":
                return this.evaluateApplication(expr);
            case "pipeline":
                return this.evaluatePipeline(expr);
            case "binary":
                return this.evaluateBinary(expr);
            case "if":
                return this.evaluateIf(expr);
            case "definition":
                return this.evaluateDefinition(expr);
            case "mutable-definition":
                return this.evaluateMutableDefinition(expr);
            case "mutation":
                return this.evaluateMutation(expr);
            case "import":
                return this.evaluateImport(expr);
            case "record":
                return this.evaluateRecord(expr);
            case "accessor":
                return this.evaluateAccessor(expr);
            case "tuple": {
                // Evaluate all elements and return a tagged tuple value
                const elements = expr.elements.map((e) => {
                    let val = this.evaluateExpression(e);
                    if ((0, exports.isCell)(val))
                        val = val.value;
                    return val;
                });
                return (0, exports.createTuple)(elements);
            }
            case "unit": {
                // Return unit value
                return (0, exports.createUnit)();
            }
            case "list": {
                // Evaluate all elements and return a tagged list value
                const elements = expr.elements.map((e) => {
                    let val = this.evaluateExpression(e);
                    if ((0, exports.isCell)(val))
                        val = val.value;
                    return val;
                });
                return (0, exports.createList)(elements);
            }
            case "where": {
                return this.evaluateWhere(expr);
            }
            case "typed":
                // Type annotations are erased at runtime; just evaluate the inner expression
                return this.evaluateExpression(expr.expression);
            case "constrained":
                // Constraint annotations are erased at runtime; just evaluate the inner expression
                return this.evaluateExpression(expr.expression);
            case "type-definition":
                return this.evaluateTypeDefinition(expr);
            case "match":
                return this.evaluateMatch(expr);
            default:
                throw new Error(`Unknown expression kind: ${expr.kind}`);
        }
    }
    evaluateLiteral(expr) {
        if (Array.isArray(expr.value)) {
            // If it's a list, evaluate each element
            return (0, exports.createList)(expr.value.map((element) => {
                if (element && typeof element === "object" && "kind" in element) {
                    // It's an AST node, evaluate it
                    return this.evaluateExpression(element);
                }
                else {
                    // It's already a value
                    return element;
                }
            }));
        }
        // Convert primitive values to tagged values
        if (typeof expr.value === "number") {
            return (0, exports.createNumber)(expr.value);
        }
        else if (typeof expr.value === "string") {
            return (0, exports.createString)(expr.value);
        }
        else if (expr.value === null) {
            // Handle unit literals (null in AST represents unit)
            return (0, exports.createUnit)();
        }
        // Should not reach here anymore since we removed boolean literals
        throw new Error(`Unsupported literal value: ${expr.value}`);
    }
    evaluateVariable(expr) {
        const value = this.environment.get(expr.name);
        if (value === undefined) {
            const error = (0, errors_1.createError)("RuntimeError", `Undefined variable: ${expr.name}`, {
                line: expr.location.start.line,
                column: expr.location.start.column,
                start: expr.location.start.line,
                end: expr.location.end.line,
            }, expr.name, `Define the variable before using it: ${expr.name} = value`);
            throw error;
        }
        // If it's a cell, return its value
        if ((0, exports.isCell)(value)) {
            return value.value;
        }
        return value;
    }
    evaluateFunction(expr) {
        const self = this;
        // Create a closure that captures the current environment
        const closureEnv = new Map(this.environment);
        function createCurriedFunction(params, body) {
            return (0, exports.createFunction)((arg) => {
                // Create a new environment for this function call
                const callEnv = new Map(closureEnv);
                // Set the parameter in the call environment
                const param = params[0];
                callEnv.set(param, arg);
                let result;
                if (params.length === 1) {
                    // Use environment stacking for efficient scoping
                    result = self.withNewEnvironment(() => {
                        self.environment = callEnv;
                        return self.evaluateExpression(body);
                    });
                }
                else {
                    // Create a function that captures the current parameter
                    const remainingParams = params.slice(1);
                    const nextFunction = (0, exports.createFunction)((nextArg) => {
                        const nextCallEnv = new Map(callEnv);
                        nextCallEnv.set(remainingParams[0], nextArg);
                        if (remainingParams.length === 1) {
                            return self.withNewEnvironment(() => {
                                self.environment = nextCallEnv;
                                return self.evaluateExpression(body);
                            });
                        }
                        else {
                            // Continue currying for remaining parameters
                            const remainingFunction = self.withNewEnvironment(() => {
                                self.environment = nextCallEnv;
                                return self.evaluateFunction({
                                    ...expr,
                                    params: remainingParams,
                                });
                            });
                            if ((0, exports.isFunction)(remainingFunction)) {
                                return remainingFunction.fn(nextArg);
                            }
                            else {
                                throw new Error(`Expected function but got: ${typeof remainingFunction}`);
                            }
                        }
                    });
                    result = nextFunction;
                }
                return result;
            });
        }
        return createCurriedFunction(expr.params, expr.body);
    }
    evaluateApplication(expr) {
        const func = this.evaluateExpression(expr.func);
        // Only apply the function to the arguments present in the AST
        const args = expr.args;
        if ((0, exports.isFunction)(func)) {
            // Handle tagged function application
            let result = func.fn;
            for (const argExpr of args) {
                let arg = this.evaluateExpression(argExpr);
                if ((0, exports.isCell)(arg))
                    arg = arg.value;
                if (typeof result === "function") {
                    result = result(arg);
                }
                else {
                    throw new Error(`Cannot apply argument to non-function: ${typeof result}`);
                }
            }
            return result;
        }
        else if ((0, exports.isNativeFunction)(func)) {
            // Handle native function application
            let result = func.fn;
            for (const argExpr of args) {
                let arg = this.evaluateExpression(argExpr);
                if ((0, exports.isCell)(arg))
                    arg = arg.value;
                if (typeof result === "function") {
                    result = result(arg);
                }
                else if ((0, exports.isFunction)(result)) {
                    result = result.fn(arg);
                }
                else if ((0, exports.isNativeFunction)(result)) {
                    result = result.fn(arg);
                }
                else {
                    throw new Error(`Cannot apply argument to non-function: ${typeof result}`);
                }
            }
            return result;
        }
        else {
            throw new Error(`Cannot apply non-function: ${typeof func} (${func?.tag || "unknown"})`);
        }
    }
    evaluatePipeline(expr) {
        // Pipeline should be function composition, not function application
        // For a pipeline like f |> g |> h, we want to compose them as h(g(f(x)))
        if (expr.steps.length === 1) {
            return this.evaluateExpression(expr.steps[0]);
        }
        // Start with the first function
        let composed = this.evaluateExpression(expr.steps[0]);
        // Compose with each subsequent function
        for (let i = 1; i < expr.steps.length; i++) {
            const nextFunc = this.evaluateExpression(expr.steps[i]);
            if ((0, exports.isFunction)(composed) && (0, exports.isFunction)(nextFunc)) {
                // Compose: nextFunc(composed(x))
                const composedFn = composed;
                const nextFuncFn = nextFunc;
                composed = (0, exports.createFunction)((x) => nextFuncFn.fn(composedFn.fn(x)));
            }
            else if ((0, exports.isNativeFunction)(composed) && (0, exports.isNativeFunction)(nextFunc)) {
                // Compose: nextFunc(composed(x))
                const composedFn = composed;
                const nextFuncFn = nextFunc;
                composed = (0, exports.createFunction)((x) => nextFuncFn.fn(composedFn.fn(x)));
            }
            else if ((0, exports.isFunction)(composed) && (0, exports.isNativeFunction)(nextFunc)) {
                // Compose: nextFunc(composed(x))
                const composedFn = composed;
                const nextFuncFn = nextFunc;
                composed = (0, exports.createFunction)((x) => nextFuncFn.fn(composedFn.fn(x)));
            }
            else if ((0, exports.isNativeFunction)(composed) && (0, exports.isFunction)(nextFunc)) {
                // Compose: nextFunc(composed(x))
                const composedFn = composed;
                const nextFuncFn = nextFunc;
                composed = (0, exports.createFunction)((x) => nextFuncFn.fn(composedFn.fn(x)));
            }
            else {
                throw new Error(`Cannot compose non-functions in pipeline: ${valueToString(composed)} and ${valueToString(nextFunc)}`);
            }
        }
        return composed;
    }
    evaluateBinary(expr) {
        if (expr.operator === ';') {
            // Handle semicolon operator (sequence)
            // Evaluate left expression and discard result
            this.evaluateExpression(expr.left);
            // Evaluate and return right expression
            return this.evaluateExpression(expr.right);
        }
        else if (expr.operator === '|') {
            // Handle thrush operator
            const left = this.evaluateExpression(expr.left);
            const right = this.evaluateExpression(expr.right);
            if ((0, exports.isFunction)(right)) {
                return right.fn(left);
            }
            else if ((0, exports.isNativeFunction)(right)) {
                return right.fn(left);
            }
            else {
                throw new Error(`Cannot apply non-function in thrush: ${valueToString(right)}`);
            }
        }
        else if (expr.operator === '|>') {
            // Handle pipeline operator (left-to-right composition)
            const left = this.evaluateExpression(expr.left);
            const right = this.evaluateExpression(expr.right);
            if ((0, exports.isFunction)(left) && (0, exports.isFunction)(right)) {
                // Left-to-right composition: g(f(x))
                return (0, exports.createFunction)((x) => right.fn(left.fn(x)));
            }
            else if ((0, exports.isNativeFunction)(left) && (0, exports.isNativeFunction)(right)) {
                // Left-to-right composition: g(f(x))
                return (0, exports.createFunction)((x) => right.fn(left.fn(x)));
            }
            else if ((0, exports.isFunction)(left) && (0, exports.isNativeFunction)(right)) {
                // Left-to-right composition: g(f(x))
                return (0, exports.createFunction)((x) => right.fn(left.fn(x)));
            }
            else if ((0, exports.isNativeFunction)(left) && (0, exports.isFunction)(right)) {
                // Left-to-right composition: g(f(x))
                return (0, exports.createFunction)((x) => right.fn(left.fn(x)));
            }
            else {
                throw new Error(`Cannot compose non-functions in pipeline: ${valueToString(left)} and ${valueToString(right)}`);
            }
        }
        else if (expr.operator === '<|') {
            // Handle right-to-left composition operator
            const left = this.evaluateExpression(expr.left);
            const right = this.evaluateExpression(expr.right);
            if ((0, exports.isFunction)(left) && (0, exports.isFunction)(right)) {
                // Right-to-left: f(g(x))
                return (0, exports.createFunction)((x) => left.fn(right.fn(x)));
            }
            else if ((0, exports.isNativeFunction)(left) && (0, exports.isNativeFunction)(right)) {
                // Right-to-left: f(g(x))
                return (0, exports.createFunction)((x) => left.fn(right.fn(x)));
            }
            else {
                throw new Error(`Cannot compose non-functions: ${valueToString(left)} and ${valueToString(right)}`);
            }
        }
        else {
            // Handle other binary operators (arithmetic, comparison, etc.)
            const left = this.evaluateExpression(expr.left);
            const right = this.evaluateExpression(expr.right);
            const leftVal = (0, exports.isCell)(left) ? left.value : left;
            const rightVal = (0, exports.isCell)(right) ? right.value : right;
            const operator = this.environment.get(expr.operator);
            const operatorVal = (0, exports.isCell)(operator) ? operator.value : operator;
            if (operatorVal && (0, exports.isNativeFunction)(operatorVal)) {
                const fn = operatorVal.fn(leftVal);
                if (typeof fn === 'function') {
                    return fn(rightVal);
                }
                else if ((0, exports.isFunction)(fn)) {
                    return fn.fn(rightVal);
                }
                else if ((0, exports.isNativeFunction)(fn)) {
                    return fn.fn(rightVal);
                }
                throw new Error(`Operator ${expr.operator} did not return a function`);
            }
            throw new Error(`Unknown operator: ${expr.operator}`);
        }
    }
    evaluateIf(expr) {
        const condition = this.evaluateExpression(expr.condition);
        // Check if condition is truthy - handle tagged boolean values
        let isTruthy = false;
        if ((0, exports.isBool)(condition)) {
            isTruthy = (0, exports.boolValue)(condition);
        }
        else if ((0, exports.isNumber)(condition)) {
            isTruthy = condition.value !== 0;
        }
        else if ((0, exports.isString)(condition)) {
            isTruthy = condition.value !== "";
        }
        else if ((0, exports.isUnit)(condition)) {
            isTruthy = true;
        }
        else {
            // For other types (functions, lists, records), consider them truthy
            isTruthy = true;
        }
        if (isTruthy) {
            return this.evaluateExpression(expr.then);
        }
        else {
            return this.evaluateExpression(expr.else);
        }
    }
    evaluateImport(expr) {
        try {
            const filePath = expr.path.endsWith(".noo")
                ? expr.path
                : `${expr.path}.noo`;
            let fullPath;
            if (this.path.isAbsolute(filePath)) {
                fullPath = filePath;
            }
            else if (this.currentFileDir) {
                fullPath = this.path.resolve(this.currentFileDir, filePath);
            }
            else {
                fullPath = this.path.resolve(filePath);
            }
            const content = this.fs.readFileSync(fullPath, "utf8");
            const lexer = new lexer_1.Lexer(content);
            const tokens = lexer.tokenize();
            const program = (0, parser_1.parse)(tokens);
            const tempEvaluator = new Evaluator({ fs: this.fs, path: this.path });
            const result = tempEvaluator.evaluateProgram(program, fullPath);
            return result.finalResult;
        }
        catch (error) {
            let errorMessage;
            if (error instanceof Error) {
                errorMessage = error.message;
                if (error.stack) {
                    errorMessage += "\nStack trace:\n" + error.stack;
                }
            }
            else if (typeof error === "object") {
                try {
                    errorMessage = JSON.stringify(error, null, 2);
                }
                catch (_e) {
                    errorMessage = String(error);
                }
            }
            else {
                errorMessage = String(error);
            }
            const cwd = process.cwd();
            const filePath = expr.path.endsWith(".noo")
                ? expr.path
                : `${expr.path}.noo`;
            let fullPath;
            if (this.path.isAbsolute(filePath)) {
                fullPath = filePath;
            }
            else if (this.currentFileDir) {
                fullPath = this.path.resolve(this.currentFileDir, filePath);
            }
            else {
                fullPath = this.path.resolve(filePath);
            }
            const structuredError = (0, errors_1.createError)("ImportError", `Failed to import '${expr.path}': ${errorMessage}\n  Tried to resolve: ${fullPath}\n  Current working directory: ${cwd}\n  Importing file directory: ${this.currentFileDir || "unknown"}\n  Suggestion: Use a path relative to the importing file, e.g., 'math_functions' or '../std/math'`, {
                line: expr.location.start.line,
                column: expr.location.start.column,
                start: expr.location.start.line,
                end: expr.location.end.line,
            }, `import "${expr.path}"`, "Check that the file exists and can be parsed, and that the path is correct relative to the importing file.");
            throw structuredError;
        }
    }
    evaluateRecord(expr) {
        const record = {};
        for (const field of expr.fields) {
            let val = this.evaluateExpression(field.value);
            if ((0, exports.isCell)(val))
                val = val.value;
            record[field.name] = val;
        }
        return (0, exports.createRecord)(record);
    }
    evaluateAccessor(expr) {
        // Return a function that takes a record and returns the field value
        return (0, exports.createNativeFunction)(`@${expr.field}`, (record) => {
            if ((0, exports.isRecord)(record)) {
                const field = expr.field;
                if (field in record.fields) {
                    return record.fields[field];
                }
            }
            throw new Error(`Field '${expr.field}' not found in record`);
        });
    }
    evaluateWhere(expr) {
        // Use environment stacking for where clause
        return this.withNewEnvironment(() => {
            // Evaluate all definitions in the where clause
            for (const def of expr.definitions) {
                if (def.kind === "definition") {
                    const value = this.evaluateExpression(def.value);
                    this.environment.set(def.name, value);
                }
                else if (def.kind === "mutable-definition") {
                    const value = this.evaluateExpression(def.value);
                    this.environment.set(def.name, (0, exports.createCell)(value));
                }
            }
            // Evaluate the main expression
            return this.evaluateExpression(expr.main);
        });
    }
    containsVariable(expr, varName) {
        switch (expr.kind) {
            case "variable":
                return expr.name === varName;
            case "function":
                // Don't check function parameters
                return this.containsVariable(expr.body, varName);
            case "application":
                return (this.containsVariable(expr.func, varName) ||
                    expr.args.some((arg) => this.containsVariable(arg, varName)));
            case "binary":
                return (this.containsVariable(expr.left, varName) ||
                    this.containsVariable(expr.right, varName));
            case "if":
                return (this.containsVariable(expr.condition, varName) ||
                    this.containsVariable(expr.then, varName) ||
                    this.containsVariable(expr.else, varName));
            case "definition":
                return this.containsVariable(expr.value, varName);
            case "mutable-definition":
                return this.containsVariable(expr.value, varName);
            case "mutation":
                return (expr.target === varName ||
                    this.containsVariable(expr.value, varName));
            case "record":
                return expr.fields.some((field) => this.containsVariable(field.value, varName));
            case "tuple":
                return expr.elements.some((element) => this.containsVariable(element, varName));
            case "list":
                return expr.elements.some((element) => this.containsVariable(element, varName));
            case "pipeline":
                return expr.steps.some((step) => this.containsVariable(step, varName));
            case "import":
            case "accessor":
            case "literal":
            case "unit":
            case "typed":
                return false;
            default:
                return false;
        }
    }
    // Efficient environment stack management
    pushEnvironment() {
        this.environmentStack.push(this.environment);
        this.environment = new Map(this.environment);
    }
    popEnvironment() {
        if (this.environmentStack[0]) {
            // biome-ignore lint/style/noNonNullAssertion: we checked
            this.environment = this.environmentStack.pop();
        }
    }
    withNewEnvironment(fn) {
        this.pushEnvironment();
        try {
            return fn();
        }
        finally {
            this.popEnvironment();
        }
    }
    // Get the current environment (useful for debugging)
    getEnvironment() {
        return new Map(Array.from(this.environment.entries()).map(([k, v]) => [
            k,
            (0, exports.isCell)(v) ? v.value : v,
        ]));
    }
    expressionToString(expr) {
        switch (expr.kind) {
            case "literal":
                if (Array.isArray(expr.value)) {
                    return `[${expr.value
                        .map((e) => this.expressionToString(e))
                        .join(" ")}]`;
                }
                return String(expr.value);
            case "variable":
                return expr.name;
            case "function":
                return `fn ${expr.params.join(" ")} => ${this.expressionToString(expr.body)}`;
            case "application":
                return `${this.expressionToString(expr.func)} ${expr.args
                    .map((arg) => this.expressionToString(arg))
                    .join(" ")}`;
            case "pipeline":
                return expr.steps
                    .map((step) => this.expressionToString(step))
                    .join(" | ");
            case "binary":
                return `${this.expressionToString(expr.left)} ${expr.operator} ${this.expressionToString(expr.right)}`;
            case "if":
                return `if ${this.expressionToString(expr.condition)} then ${this.expressionToString(expr.then)} else ${this.expressionToString(expr.else)}`;
            case "definition":
                return `${expr.name} = ${this.expressionToString(expr.value)}`;
            case "mutable-definition":
                return `${expr.name} = ${this.expressionToString(expr.value)}`;
            case "mutation":
                return `mut ${expr.target} = ${this.expressionToString(expr.value)}`;
            case "import":
                return `import "${expr.path}"`;
            case "record":
                return `{ ${expr.fields
                    .map((field) => `${field.name} = ${this.expressionToString(field.value)}`)
                    .join(", ")} }`;
            case "accessor":
                return `@${expr.field}`;
            case "where":
                return `${this.expressionToString(expr.main)} where (${expr.definitions
                    .map((d) => this.expressionToString(d))
                    .join("; ")})`;
            default:
                return "unknown";
        }
    }
    evaluateTypeDefinition(expr) {
        // Type definitions add constructors to the environment
        for (const _constructor of expr.constructors) {
            if (_constructor.args.length === 0) {
                // Nullary constructor: just create the constructor value
                const constructorValue = {
                    tag: "constructor",
                    name: _constructor.name,
                    args: [],
                };
                this.environment.set(_constructor.name, constructorValue);
            }
            else {
                // Create a simple constructor function that collects all arguments
                const createCurriedConstructor = (arity, name) => {
                    const collectArgs = (collectedArgs = []) => {
                        return (0, exports.createFunction)((nextArg) => {
                            const newArgs = [...collectedArgs, nextArg];
                            if (newArgs.length === arity) {
                                return { tag: "constructor", name, args: newArgs };
                            }
                            else {
                                return collectArgs(newArgs);
                            }
                        });
                    };
                    return collectArgs();
                };
                this.environment.set(_constructor.name, createCurriedConstructor(_constructor.args.length, _constructor.name));
            }
        }
        // Type definitions evaluate to unit
        return (0, exports.createUnit)();
    }
    evaluateMatch(expr) {
        // Evaluate the expression being matched
        const value = this.evaluateExpression(expr.expression);
        // Try each case until one matches
        for (const matchCase of expr.cases) {
            const matchResult = this.tryMatchPattern(matchCase.pattern, value);
            if (matchResult.matched) {
                // Use environment stacking for pattern bindings
                return this.withNewEnvironment(() => {
                    // Add bindings to environment
                    for (const [name, boundValue] of matchResult.bindings) {
                        this.environment.set(name, boundValue);
                    }
                    // Evaluate the case expression
                    return this.evaluateExpression(matchCase.expression);
                });
            }
        }
        throw new Error("No pattern matched in match expression");
    }
    tryMatchPattern(pattern, value) {
        const bindings = new Map();
        switch (pattern.kind) {
            case "wildcard":
                // Wildcard always matches
                return { matched: true, bindings };
            case "variable":
                // Variable always matches and binds the value
                bindings.set(pattern.name, value);
                return { matched: true, bindings };
            case "constructor": {
                // Constructor pattern only matches constructor values
                if (value.tag !== "constructor") {
                    return { matched: false, bindings };
                }
                // Check constructor name
                if (value.name !== pattern.name) {
                    return { matched: false, bindings };
                }
                // Check argument count
                if (pattern.args.length !== value.args.length) {
                    return { matched: false, bindings };
                }
                // Match each argument
                for (let i = 0; i < pattern.args.length; i++) {
                    const argMatch = this.tryMatchPattern(pattern.args[i], value.args[i]);
                    if (!argMatch.matched) {
                        return { matched: false, bindings };
                    }
                    // Merge bindings
                    for (const [name, boundValue] of argMatch.bindings) {
                        bindings.set(name, boundValue);
                    }
                }
                return { matched: true, bindings };
            }
            case "literal": {
                // Literal pattern matches if values are equal
                let matches = false;
                if (typeof pattern.value === "number" && (0, exports.isNumber)(value)) {
                    matches = pattern.value === value.value;
                }
                else if (typeof pattern.value === "string" && (0, exports.isString)(value)) {
                    matches = pattern.value === value.value;
                }
                return { matched: matches, bindings };
            }
            default:
                throw new Error(`Unsupported pattern kind: ${pattern.kind}`);
        }
    }
}
exports.Evaluator = Evaluator;
// Move valueToString to a standalone function
function valueToString(value) {
    if ((0, exports.isNumber)(value)) {
        return String(value.value);
    }
    else if ((0, exports.isString)(value)) {
        return `"${value.value}"`;
    }
    else if ((0, exports.isBool)(value)) {
        return (0, exports.boolValue)(value) ? "True" : "False";
    }
    else if ((0, exports.isList)(value)) {
        return `[${value.values.map(valueToString).join("; ")}]`;
    }
    else if ((0, exports.isTuple)(value)) {
        return `{${value.values.map(valueToString).join("; ")}}`;
    }
    else if ((0, exports.isRecord)(value)) {
        const fields = Object.entries(value.fields)
            .map(([k, v]) => `@${k} ${valueToString(v)}`)
            .join("; ");
        return `{${fields}}`;
    }
    else if ((0, exports.isFunction)(value)) {
        return "<function>";
    }
    else if ((0, exports.isNativeFunction)(value)) {
        return `<native:${value.name}>`;
    }
    else if ((0, exports.isConstructor)(value)) {
        if (value.args.length === 0) {
            return value.name;
        }
        else {
            return `${value.name} ${value.args.map(valueToString).join(" ")}`;
        }
    }
    else if ((0, exports.isUnit)(value)) {
        return "unit";
    }
    return "[object Object]";
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxJQUFJLElBQUEsY0FBTSxFQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDMUIsT0FBTyxNQUFNLENBQUM7SUFDZixDQUFDO0lBQ0QsT0FBTyxpQkFBaUIsQ0FBQztBQUMxQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2Uvc3JjL2V2YWx1YXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkZWZhdWx0RnMgZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCAqIGFzIGRlZmF1bHRQYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCB0eXBlIHtcblx0RXhwcmVzc2lvbixcblx0UHJvZ3JhbSxcblx0TGl0ZXJhbEV4cHJlc3Npb24sXG5cdFZhcmlhYmxlRXhwcmVzc2lvbixcblx0RnVuY3Rpb25FeHByZXNzaW9uLFxuXHRBcHBsaWNhdGlvbkV4cHJlc3Npb24sXG5cdFBpcGVsaW5lRXhwcmVzc2lvbixcblx0QmluYXJ5RXhwcmVzc2lvbixcblx0SWZFeHByZXNzaW9uLFxuXHREZWZpbml0aW9uRXhwcmVzc2lvbixcblx0SW1wb3J0RXhwcmVzc2lvbixcblx0UmVjb3JkRXhwcmVzc2lvbixcblx0QWNjZXNzb3JFeHByZXNzaW9uLFxuXHRUeXBlRGVmaW5pdGlvbkV4cHJlc3Npb24sXG5cdE1hdGNoRXhwcmVzc2lvbixcblx0UGF0dGVybixcblx0V2hlcmVFeHByZXNzaW9uLFxuXHRNdXRhYmxlRGVmaW5pdGlvbkV4cHJlc3Npb24sXG5cdE11dGF0aW9uRXhwcmVzc2lvbixcbn0gZnJvbSBcIi4vYXN0XCI7XG5pbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xuaW1wb3J0IHsgZm9ybWF0VmFsdWUgfSBmcm9tIFwiLi9mb3JtYXRcIjtcbmltcG9ydCB7IExleGVyIH0gZnJvbSBcIi4vbGV4ZXJcIjtcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIi4vcGFyc2VyL3BhcnNlclwiO1xuXG4vLyBWYWx1ZSB0eXBlcyAoUGhhc2UgNjogZnVuY3Rpb25zIGFuZCBuYXRpdmUgZnVuY3Rpb25zIGFzIHRhZ2dlZCB1bmlvbilcbmV4cG9ydCB0eXBlIFZhbHVlID1cblx0fCB7IHRhZzogXCJudW1iZXJcIjsgdmFsdWU6IG51bWJlciB9XG5cdHwgeyB0YWc6IFwic3RyaW5nXCI7IHZhbHVlOiBzdHJpbmcgfVxuXHR8IHsgdGFnOiBcInR1cGxlXCI7IHZhbHVlczogVmFsdWVbXSB9XG5cdHwgeyB0YWc6IFwibGlzdFwiOyB2YWx1ZXM6IFZhbHVlW10gfVxuXHR8IHsgdGFnOiBcInJlY29yZFwiOyBmaWVsZHM6IHsgW2tleTogc3RyaW5nXTogVmFsdWUgfSB9XG5cdHwgeyB0YWc6IFwiZnVuY3Rpb25cIjsgZm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZSB9XG5cdHwgeyB0YWc6IFwibmF0aXZlXCI7IG5hbWU6IHN0cmluZzsgZm46IHVua25vd24gfVxuXHR8IHsgdGFnOiBcImNvbnN0cnVjdG9yXCI7IG5hbWU6IHN0cmluZzsgYXJnczogVmFsdWVbXSB9XG5cdHwgeyB0YWc6IFwidW5pdFwiIH07XG5cbi8vIC0tLSBNdXRhYmxlIENlbGwgdHlwZSAtLS1cbmV4cG9ydCB0eXBlIENlbGwgPSB7IGNlbGw6IHRydWU7IHZhbHVlOiBWYWx1ZSB9O1xuZXhwb3J0IGNvbnN0IGlzQ2VsbCA9ICh2YWw6IGFueSk6IHZhbCBpcyBDZWxsID0+XG5cdHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbC5jZWxsID09PSB0cnVlICYmIFwidmFsdWVcIiBpbiB2YWw7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDZWxsID0gKHZhbHVlOiBWYWx1ZSk6IENlbGwgPT4gKHsgY2VsbDogdHJ1ZSwgdmFsdWUgfSk7XG5cbmV4cG9ydCBjb25zdCBpc051bWJlciA9IChcblx0dmFsdWU6IFZhbHVlLFxuKTogdmFsdWUgaXMgeyB0YWc6IFwibnVtYmVyXCI7IHZhbHVlOiBudW1iZXIgfSA9PiB2YWx1ZS50YWcgPT09IFwibnVtYmVyXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVOdW1iZXIgPSAodmFsdWU6IG51bWJlcik6IFZhbHVlID0+ICh7XG5cdHRhZzogXCJudW1iZXJcIixcblx0dmFsdWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gKFxuXHR2YWx1ZTogVmFsdWUsXG4pOiB2YWx1ZSBpcyB7IHRhZzogXCJzdHJpbmdcIjsgdmFsdWU6IHN0cmluZyB9ID0+IHZhbHVlLnRhZyA9PT0gXCJzdHJpbmdcIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0cmluZyA9ICh2YWx1ZTogc3RyaW5nKTogVmFsdWUgPT4gKHtcblx0dGFnOiBcInN0cmluZ1wiLFxuXHR2YWx1ZSxcbn0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVHJ1ZSA9ICgpOiBWYWx1ZSA9PiAoe1xuXHR0YWc6IFwiY29uc3RydWN0b3JcIixcblx0bmFtZTogXCJUcnVlXCIsXG5cdGFyZ3M6IFtdLFxufSk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVGYWxzZSA9ICgpOiBWYWx1ZSA9PiAoe1xuXHR0YWc6IFwiY29uc3RydWN0b3JcIixcblx0bmFtZTogXCJGYWxzZVwiLFxuXHRhcmdzOiBbXSxcbn0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQm9vbCA9ICh2YWx1ZTogYm9vbGVhbik6IFZhbHVlID0+XG5cdGNyZWF0ZUNvbnN0cnVjdG9yKHZhbHVlID8gXCJUcnVlXCIgOiBcIkZhbHNlXCIsIFtdKTtcblxuZXhwb3J0IGNvbnN0IGlzQm9vbCA9IChcblx0dmFsdWU6IFZhbHVlLFxuKTogdmFsdWUgaXMgeyB0YWc6IFwiY29uc3RydWN0b3JcIjsgbmFtZTogXCJUcnVlXCIgfCBcIkZhbHNlXCI7IGFyZ3M6IFtdIH0gPT5cblx0dmFsdWUudGFnID09PSBcImNvbnN0cnVjdG9yXCIgJiZcblx0KHZhbHVlLm5hbWUgPT09IFwiVHJ1ZVwiIHx8IHZhbHVlLm5hbWUgPT09IFwiRmFsc2VcIik7XG5cbmV4cG9ydCBjb25zdCBib29sVmFsdWUgPSAodmFsdWU6IFZhbHVlKTogYm9vbGVhbiA9PiB7XG5cdGlmICh2YWx1ZS50YWcgPT09IFwiY29uc3RydWN0b3JcIiAmJiB2YWx1ZS5uYW1lID09PSBcIlRydWVcIikgcmV0dXJuIHRydWU7XG5cdGlmICh2YWx1ZS50YWcgPT09IFwiY29uc3RydWN0b3JcIiAmJiB2YWx1ZS5uYW1lID09PSBcIkZhbHNlXCIpIHJldHVybiBmYWxzZTtcblx0dGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBCb29sIGNvbnN0cnVjdG9yLCBnb3QgJHt2YWx1ZS50YWd9YCk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNMaXN0ID0gKFxuXHR2YWx1ZTogVmFsdWUsXG4pOiB2YWx1ZSBpcyB7IHRhZzogXCJsaXN0XCI7IHZhbHVlczogVmFsdWVbXSB9ID0+IHZhbHVlLnRhZyA9PT0gXCJsaXN0XCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVMaXN0ID0gKHZhbHVlczogVmFsdWVbXSk6IFZhbHVlID0+ICh7IHRhZzogXCJsaXN0XCIsIHZhbHVlcyB9KTtcblxuZXhwb3J0IGNvbnN0IGlzUmVjb3JkID0gKFxuXHR2YWx1ZTogVmFsdWUsXG4pOiB2YWx1ZSBpcyB7IHRhZzogXCJyZWNvcmRcIjsgZmllbGRzOiB7IFtrZXk6IHN0cmluZ106IFZhbHVlIH0gfSA9PlxuXHR2YWx1ZS50YWcgPT09IFwicmVjb3JkXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZWNvcmQgPSAoZmllbGRzOiB7IFtrZXk6IHN0cmluZ106IFZhbHVlIH0pOiBWYWx1ZSA9PiAoe1xuXHR0YWc6IFwicmVjb3JkXCIsXG5cdGZpZWxkcyxcbn0pO1xuXG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbiA9IChcblx0dmFsdWU6IFZhbHVlLFxuKTogdmFsdWUgaXMgeyB0YWc6IFwiZnVuY3Rpb25cIjsgZm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZSB9ID0+XG5cdHZhbHVlLnRhZyA9PT0gXCJmdW5jdGlvblwiO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRnVuY3Rpb24gPSAoZm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZSk6IFZhbHVlID0+ICh7XG5cdHRhZzogXCJmdW5jdGlvblwiLFxuXHRmbixcbn0pO1xuXG5leHBvcnQgY29uc3QgaXNOYXRpdmVGdW5jdGlvbiA9IChcblx0dmFsdWU6IFZhbHVlLFxuKTogdmFsdWUgaXMgeyB0YWc6IFwibmF0aXZlXCI7IG5hbWU6IHN0cmluZzsgZm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZSB9ID0+XG5cdHZhbHVlLnRhZyA9PT0gXCJuYXRpdmVcIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uID0gKG5hbWU6IHN0cmluZywgZm46IGFueSk6IFZhbHVlID0+IHtcblx0Y29uc3Qgd3JhcCA9IChmbjogYW55LCBjdXJyaWVkTmFtZTogc3RyaW5nKTogVmFsdWUgPT4gKHtcblx0XHR0YWc6IFwibmF0aXZlXCIsXG5cdFx0bmFtZTogY3VycmllZE5hbWUsXG5cdFx0Zm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBmbiguLi5hcmdzKTtcblx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0cmV0dXJuIHdyYXAocmVzdWx0LCBjdXJyaWVkTmFtZSArIFwiX2N1cnJpZWRcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0sXG5cdH0pO1xuXHRyZXR1cm4gd3JhcChmbiwgbmFtZSk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNUdXBsZSA9IChcblx0dmFsdWU6IFZhbHVlLFxuKTogdmFsdWUgaXMgeyB0YWc6IFwidHVwbGVcIjsgdmFsdWVzOiBWYWx1ZVtdIH0gPT4gdmFsdWUudGFnID09PSBcInR1cGxlXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVUdXBsZSA9ICh2YWx1ZXM6IFZhbHVlW10pOiBWYWx1ZSA9PiAoe1xuXHR0YWc6IFwidHVwbGVcIixcblx0dmFsdWVzLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpc1VuaXQgPSAodmFsdWU6IFZhbHVlKTogdmFsdWUgaXMgeyB0YWc6IFwidW5pdFwiIH0gPT5cblx0dmFsdWUudGFnID09PSBcInVuaXRcIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVuaXQgPSAoKTogVmFsdWUgPT4gKHsgdGFnOiBcInVuaXRcIiB9KTtcblxuZXhwb3J0IGNvbnN0IGlzQ29uc3RydWN0b3IgPSAoXG5cdHZhbHVlOiBWYWx1ZSxcbik6IHZhbHVlIGlzIHsgdGFnOiBcImNvbnN0cnVjdG9yXCI7IG5hbWU6IHN0cmluZzsgYXJnczogVmFsdWVbXSB9ID0+XG5cdHZhbHVlLnRhZyA9PT0gXCJjb25zdHJ1Y3RvclwiO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ29uc3RydWN0b3IgPSAobmFtZTogc3RyaW5nLCBhcmdzOiBWYWx1ZVtdKTogVmFsdWUgPT4gKHtcblx0dGFnOiBcImNvbnN0cnVjdG9yXCIsXG5cdG5hbWUsXG5cdGFyZ3MsXG59KTtcblxuZXhwb3J0IHR5cGUgRXhlY3V0aW9uU3RlcCA9IHtcblx0ZXhwcmVzc2lvbjogc3RyaW5nO1xuXHRyZXN1bHQ6IFZhbHVlO1xuXHR0eXBlPzogc3RyaW5nO1xuXHRsb2NhdGlvbj86IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9O1xufTtcblxuZXhwb3J0IHR5cGUgUHJvZ3JhbVJlc3VsdCA9IHtcblx0ZmluYWxSZXN1bHQ6IFZhbHVlO1xuXHRleGVjdXRpb25UcmFjZTogRXhlY3V0aW9uU3RlcFtdO1xuXHRlbnZpcm9ubWVudDogTWFwPHN0cmluZywgVmFsdWU+O1xufTtcblxuZXhwb3J0IHR5cGUgRW52aXJvbm1lbnQgPSBNYXA8c3RyaW5nLCBWYWx1ZSB8IENlbGw+O1xuXG4vLyBIZWxwZXIgdG8gZmxhdHRlbiBzZW1pY29sb24tc2VwYXJhdGVkIGJpbmFyeSBleHByZXNzaW9ucyBpbnRvIGluZGl2aWR1YWwgc3RhdGVtZW50c1xuY29uc3QgZmxhdHRlblN0YXRlbWVudHMgPSAoZXhwcjogRXhwcmVzc2lvbik6IEV4cHJlc3Npb25bXSA9PiB7XG5cdGlmIChleHByLmtpbmQgPT09IFwiYmluYXJ5XCIgJiYgZXhwci5vcGVyYXRvciA9PT0gXCI7XCIpIHtcblx0XHRyZXR1cm4gWy4uLmZsYXR0ZW5TdGF0ZW1lbnRzKGV4cHIubGVmdCksIC4uLmZsYXR0ZW5TdGF0ZW1lbnRzKGV4cHIucmlnaHQpXTtcblx0fVxuXHRyZXR1cm4gW2V4cHJdO1xufTtcblxuZXhwb3J0IGNsYXNzIEV2YWx1YXRvciB7XG5cdFx0cHVibGljIGVudmlyb25tZW50OiBFbnZpcm9ubWVudDtcblx0XHRwcml2YXRlIGVudmlyb25tZW50U3RhY2s6IEVudmlyb25tZW50W107IC8vIFN0YWNrIGZvciBlZmZpY2llbnQgc2NvcGluZ1xuXHRcdHByaXZhdGUgY3VycmVudEZpbGVEaXI/OiBzdHJpbmc7IC8vIFRyYWNrIHRoZSBkaXJlY3Rvcnkgb2YgdGhlIGN1cnJlbnQgZmlsZSBiZWluZyBldmFsdWF0ZWRcblx0XHRwcml2YXRlIGZzOiB0eXBlb2YgZGVmYXVsdEZzO1xuXHRcdHByaXZhdGUgcGF0aDogdHlwZW9mIGRlZmF1bHRQYXRoO1xuXG5cdFx0Y29uc3RydWN0b3Iob3B0cz86IHtcblx0XHRcdGZzPzogdHlwZW9mIGRlZmF1bHRGcztcblx0XHRcdHBhdGg/OiB0eXBlb2YgZGVmYXVsdFBhdGg7XG5cdFx0fSkge1xuXHRcdFx0dGhpcy5mcyA9IG9wdHM/LmZzID8/IGRlZmF1bHRGcztcblx0XHRcdHRoaXMucGF0aCA9IG9wdHM/LnBhdGggPz8gZGVmYXVsdFBhdGg7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50ID0gbmV3IE1hcCgpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudFN0YWNrID0gW107XG5cdFx0XHR0aGlzLmluaXRpYWxpemVCdWlsdGlucygpO1xuXHRcdFx0dGhpcy5sb2FkU3RkbGliKCk7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBpbml0aWFsaXplQnVpbHRpbnMoKTogdm9pZCB7XG5cdFx0XHQvLyBBcml0aG1ldGljIG9wZXJhdGlvbnNcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnKycsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCcrJywgKGE6IFZhbHVlKSA9PiAoYjogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNOdW1iZXIoYSkgJiYgaXNOdW1iZXIoYikpXG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlTnVtYmVyKGEudmFsdWUgKyBiLnZhbHVlKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRgQ2Fubm90IGFkZCAke2E/LnRhZyB8fCAndW5pdCd9IGFuZCAke2I/LnRhZyB8fCAndW5pdCd9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCctJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJy0nLCAoYTogVmFsdWUpID0+IChiOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc051bWJlcihhKSAmJiBpc051bWJlcihiKSlcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVOdW1iZXIoYS52YWx1ZSAtIGIudmFsdWUpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdGBDYW5ub3Qgc3VidHJhY3QgJHtiPy50YWcgfHwgJ3VuaXQnfSBmcm9tICR7YT8udGFnIHx8ICd1bml0J31gXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0JyonLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignKicsIChhOiBWYWx1ZSkgPT4gKGI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTnVtYmVyKGEpICYmIGlzTnVtYmVyKGIpKVxuXHRcdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZU51bWJlcihhLnZhbHVlICogYi52YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBtdWx0aXBseSAke2E/LnRhZyB8fCAndW5pdCd9IGFuZCAke2I/LnRhZyB8fCAndW5pdCd9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCcvJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJy8nLCAoYTogVmFsdWUpID0+IChiOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc051bWJlcihhKSAmJiBpc051bWJlcihiKSkge1xuXHRcdFx0XHRcdFx0aWYgKGIudmFsdWUgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvcihcblx0XHRcdFx0XHRcdFx0XHQnUnVudGltZUVycm9yJyxcblx0XHRcdFx0XHRcdFx0XHQnRGl2aXNpb24gYnkgemVybycsXG5cdFx0XHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdGAke2EudmFsdWV9IC8gJHtiLnZhbHVlfWAsXG5cdFx0XHRcdFx0XHRcdFx0J0NoZWNrIHRoYXQgdGhlIGRpdmlzb3IgaXMgbm90IHplcm8gYmVmb3JlIGRpdmlkaW5nJ1xuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVOdW1iZXIoYS52YWx1ZSAvIGIudmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRgQ2Fubm90IGRpdmlkZSAke2E/LnRhZyB8fCAndW5pdCd9IGJ5ICR7Yj8udGFnIHx8ICd1bml0J31gXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIENvbXBhcmlzb24gb3BlcmF0aW9uc1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCc9PScsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCc9PScsIChhOiBWYWx1ZSkgPT4gKGI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTnVtYmVyKGEpICYmIGlzTnVtYmVyKGIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlID09PSBiLnZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzU3RyaW5nKGEpICYmIGlzU3RyaW5nKGIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlID09PSBiLnZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQm9vbChhKSAmJiBpc0Jvb2woYikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVCb29sKGJvb2xWYWx1ZShhKSA9PT0gYm9vbFZhbHVlKGIpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzVW5pdChhKSAmJiBpc1VuaXQoYikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVUcnVlKCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc1VuaXQoYSkgfHwgaXNVbml0KGIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRmFsc2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZUZhbHNlKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCchPScsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCchPScsIChhOiBWYWx1ZSkgPT4gKGI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTnVtYmVyKGEpICYmIGlzTnVtYmVyKGIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlICE9PSBiLnZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzU3RyaW5nKGEpICYmIGlzU3RyaW5nKGIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlICE9PSBiLnZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQm9vbChhKSAmJiBpc0Jvb2woYikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVCb29sKGJvb2xWYWx1ZShhKSAhPT0gYm9vbFZhbHVlKGIpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzVW5pdChhKSAmJiBpc1VuaXQoYikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVGYWxzZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNVbml0KGEpIHx8IGlzVW5pdChiKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZVRydWUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZVRydWUoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0JzwnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignPCcsIChhOiBWYWx1ZSkgPT4gKGI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTnVtYmVyKGEpICYmIGlzTnVtYmVyKGIpKSByZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlIDwgYi52YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3R5cGVvZiBhfSBhbmQgJHt0eXBlb2YgYn1gKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0Jz4nLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignPicsIChhOiBWYWx1ZSkgPT4gKGI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTnVtYmVyKGEpICYmIGlzTnVtYmVyKGIpKSByZXR1cm4gY3JlYXRlQm9vbChhLnZhbHVlID4gYi52YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3R5cGVvZiBhfSBhbmQgJHt0eXBlb2YgYn1gKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0Jzw9Jyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJzw9JywgKGE6IFZhbHVlKSA9PiAoYjogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNOdW1iZXIoYSkgJiYgaXNOdW1iZXIoYikpIHJldHVybiBjcmVhdGVCb29sKGEudmFsdWUgPD0gYi52YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3R5cGVvZiBhfSBhbmQgJHt0eXBlb2YgYn1gKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0Jz49Jyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJz49JywgKGE6IFZhbHVlKSA9PiAoYjogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNOdW1iZXIoYSkgJiYgaXNOdW1iZXIoYikpIHJldHVybiBjcmVhdGVCb29sKGEudmFsdWUgPj0gYi52YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3R5cGVvZiBhfSBhbmQgJHt0eXBlb2YgYn1gKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIFBpcGVsaW5lIG9wZXJhdG9yXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J3wnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignfCcsICh2YWx1ZTogVmFsdWUpID0+IChmdW5jOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0Z1bmN0aW9uKGZ1bmMpKSByZXR1cm4gZnVuYy5mbih2YWx1ZSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBhcHBseSBub24tZnVuY3Rpb24gaW4gdGhydXNoOiAke2Z1bmM/LnRhZyB8fCAndW5pdCd9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBMZWZ0LXRvLXJpZ2h0IGNvbXBvc2l0aW9uXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J3w+Jyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ3w+JywgKGY6IFZhbHVlKSA9PiAoZzogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNGdW5jdGlvbihmKSAmJiBpc0Z1bmN0aW9uKGcpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiBnLmZuKGYuZm4oeCkpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBjb21wb3NlIG5vbi1mdW5jdGlvbnM6ICR7Zj8udGFnIHx8ICd1bml0J30gYW5kICR7XG5cdFx0XHRcdFx0XHRcdGc/LnRhZyB8fCAndW5pdCdcblx0XHRcdFx0XHRcdH1gXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJpZ2h0LXRvLWxlZnQgY29tcG9zaXRpb25cblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnPHwnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignPHwnLCAoZjogVmFsdWUpID0+IChnOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0Z1bmN0aW9uKGYpICYmIGlzRnVuY3Rpb24oZykpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVGdW5jdGlvbigoeDogVmFsdWUpID0+IGYuZm4oZy5mbih4KSkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRgQ2Fubm90IGNvbXBvc2Ugbm9uLWZ1bmN0aW9uczogJHtmPy50YWcgfHwgJ3VuaXQnfSBhbmQgJHtcblx0XHRcdFx0XHRcdFx0Zz8udGFnIHx8ICd1bml0J1xuXHRcdFx0XHRcdFx0fWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2VtaWNvbG9uIG9wZXJhdG9yXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0JzsnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignOycsIChfbGVmdDogVmFsdWUpID0+IChyaWdodDogVmFsdWUpID0+IHJpZ2h0KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gRG9sbGFyIG9wZXJhdG9yIChsb3cgcHJlY2VkZW5jZSBmdW5jdGlvbiBhcHBsaWNhdGlvbilcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnJCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCckJywgKGZ1bmM6IFZhbHVlKSA9PiAoYXJnOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0Z1bmN0aW9uKGZ1bmMpKSByZXR1cm4gZnVuYy5mbihhcmcpO1xuXHRcdFx0XHRcdGlmIChpc05hdGl2ZUZ1bmN0aW9uKGZ1bmMpKSByZXR1cm4gZnVuYy5mbihhcmcpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdGBDYW5ub3QgYXBwbHkgbm9uLWZ1bmN0aW9uIGluIGRvbGxhciBvcGVyYXRvcjogJHtcblx0XHRcdFx0XHRcdFx0ZnVuYz8udGFnIHx8ICd1bml0J1xuXHRcdFx0XHRcdFx0fWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gTGlzdCBvcGVyYXRpb25zIC0gbWluaW1hbCBidWlsdC1pbnMgZm9yIHNlbGYtaG9zdGVkIGZ1bmN0aW9uc1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdsaXN0X2dldCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdsaXN0X2dldCcsIChpbmRleDogVmFsdWUpID0+IChsaXN0OiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc051bWJlcihpbmRleCkgJiYgaXNMaXN0KGxpc3QpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBpZHggPSBpbmRleC52YWx1ZTtcblx0XHRcdFx0XHRcdGlmIChpZHggPj0gMCAmJiBpZHggPCBsaXN0LnZhbHVlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGxpc3QudmFsdWVzW2lkeF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignbGlzdF9nZXQ6IGludmFsaWQgaW5kZXggb3Igbm90IGEgbGlzdCcpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gTGlzdCBvcGVyYXRpb25zXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J3RhaWwnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbigndGFpbCcsIChsaXN0OiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0xpc3QobGlzdCkgJiYgbGlzdC52YWx1ZXMubGVuZ3RoID4gMClcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVMaXN0KGxpc3QudmFsdWVzLnNsaWNlKDEpKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBnZXQgdGFpbCBvZiBlbXB0eSBsaXN0IG9yIG5vbi1saXN0Jyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdjb25zJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2NvbnMnLCAoaGVhZDogVmFsdWUpID0+ICh0YWlsOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0xpc3QodGFpbCkpIHJldHVybiBjcmVhdGVMaXN0KFtoZWFkLCAuLi50YWlsLnZhbHVlc10pO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignU2Vjb25kIGFyZ3VtZW50IHRvIGNvbnMgbXVzdCBiZSBhIGxpc3QnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIExpc3QgdXRpbGl0eSBmdW5jdGlvbnNcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnbWFwJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ21hcCcsIChmdW5jOiBWYWx1ZSkgPT4gKGxpc3Q6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzRnVuY3Rpb24oZnVuYykgJiYgaXNMaXN0KGxpc3QpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlTGlzdChsaXN0LnZhbHVlcy5tYXAoKGl0ZW06IFZhbHVlKSA9PiBmdW5jLmZuKGl0ZW0pKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignbWFwIHJlcXVpcmVzIGEgZnVuY3Rpb24gYW5kIGEgbGlzdCcpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnZmlsdGVyJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2ZpbHRlcicsIChwcmVkOiBWYWx1ZSkgPT4gKGxpc3Q6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzRnVuY3Rpb24ocHJlZCkgJiYgaXNMaXN0KGxpc3QpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlTGlzdChcblx0XHRcdFx0XHRcdFx0bGlzdC52YWx1ZXMuZmlsdGVyKChpdGVtOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHByZWQuZm4oaXRlbSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzQm9vbChyZXN1bHQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYm9vbFZhbHVlKHJlc3VsdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIEZvciBub24tYm9vbGVhbiByZXN1bHRzLCB0cmVhdCBhcyB0cnV0aHkvZmFsc3lcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gIWlzVW5pdChyZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdmaWx0ZXIgcmVxdWlyZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYW5kIGEgbGlzdCcpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQncmVkdWNlJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oXG5cdFx0XHRcdFx0J3JlZHVjZScsXG5cdFx0XHRcdFx0KGZ1bmM6IFZhbHVlKSA9PiAoaW5pdGlhbDogVmFsdWUpID0+IChsaXN0OiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGlzRnVuY3Rpb24oZnVuYykgJiYgaXNMaXN0KGxpc3QpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBsaXN0LnZhbHVlcy5yZWR1Y2UoKGFjYzogVmFsdWUsIGl0ZW06IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFydGlhbCA9IGZ1bmMuZm4oYWNjKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaXNGdW5jdGlvbihwYXJ0aWFsKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBhcnRpYWwuZm4oaXRlbSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdFx0XHRcdCdyZWR1Y2UgZnVuY3Rpb24gbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBhZnRlciBmaXJzdCBhcmd1bWVudCdcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9LCBpbml0aWFsKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdFx0J3JlZHVjZSByZXF1aXJlcyBhIGZ1bmN0aW9uLCBpbml0aWFsIHZhbHVlLCBhbmQgYSBsaXN0J1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2xlbmd0aCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdsZW5ndGgnLCAobGlzdDogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNMaXN0KGxpc3QpKSByZXR1cm4gY3JlYXRlTnVtYmVyKGxpc3QudmFsdWVzLmxlbmd0aCk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdsZW5ndGggcmVxdWlyZXMgYSBsaXN0Jyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdpc0VtcHR5Jyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2lzRW1wdHknLCAobGlzdDogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNMaXN0KGxpc3QpKSByZXR1cm4gY3JlYXRlQm9vbChsaXN0LnZhbHVlcy5sZW5ndGggPT09IDApO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignaXNFbXB0eSByZXF1aXJlcyBhIGxpc3QnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2FwcGVuZCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdhcHBlbmQnLCAobGlzdDE6IFZhbHVlKSA9PiAobGlzdDI6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzTGlzdChsaXN0MSkgJiYgaXNMaXN0KGxpc3QyKSlcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVMaXN0KFsuLi5saXN0MS52YWx1ZXMsIC4uLmxpc3QyLnZhbHVlc10pO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignYXBwZW5kIHJlcXVpcmVzIHR3byBsaXN0cycpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gTWF0aCB1dGlsaXRpZXNcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnYWJzJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2FicycsIChuOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc051bWJlcihuKSkgcmV0dXJuIGNyZWF0ZU51bWJlcihNYXRoLmFicyhuLnZhbHVlKSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdhYnMgcmVxdWlyZXMgYSBudW1iZXInKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J21heCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdtYXgnLCAoYTogVmFsdWUpID0+IChiOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc051bWJlcihhKSAmJiBpc051bWJlcihiKSlcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVOdW1iZXIoTWF0aC5tYXgoYS52YWx1ZSwgYi52YWx1ZSkpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignbWF4IHJlcXVpcmVzIHR3byBudW1iZXJzJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdtaW4nLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignbWluJywgKGE6IFZhbHVlKSA9PiAoYjogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNOdW1iZXIoYSkgJiYgaXNOdW1iZXIoYikpXG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlTnVtYmVyKE1hdGgubWluKGEudmFsdWUsIGIudmFsdWUpKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ21pbiByZXF1aXJlcyB0d28gbnVtYmVycycpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gRWZmZWN0ZnVsIGZ1bmN0aW9uc1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdwcmludCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdwcmludCcsICh2YWx1ZTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhmb3JtYXRWYWx1ZSh2YWx1ZSkpO1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTsgLy8gUmV0dXJuIHRoZSB2YWx1ZSB0aGF0IHdhcyBwcmludGVkXG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBTdHJpbmcgdXRpbGl0aWVzXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2NvbmNhdCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdjb25jYXQnLCAoYTogVmFsdWUpID0+IChiOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc1N0cmluZyhhKSAmJiBpc1N0cmluZyhiKSlcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVTdHJpbmcoYS52YWx1ZSArIGIudmFsdWUpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignY29uY2F0IHJlcXVpcmVzIHR3byBzdHJpbmdzJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCd0b1N0cmluZycsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCd0b1N0cmluZycsICh2YWx1ZTogVmFsdWUpID0+XG5cdFx0XHRcdFx0Y3JlYXRlU3RyaW5nKHZhbHVlVG9TdHJpbmcodmFsdWUpKVxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBSZWNvcmQgdXRpbGl0aWVzXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2hhc0tleScsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdoYXNLZXknLCAocmVjb3JkOiBWYWx1ZSkgPT4gKGtleTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNSZWNvcmQocmVjb3JkKSAmJiBpc1N0cmluZyhrZXkpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlQm9vbChrZXkudmFsdWUgaW4gcmVjb3JkLmZpZWxkcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignaGFzS2V5IHJlcXVpcmVzIGEgcmVjb3JkIGFuZCBhIHN0cmluZyBrZXknKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2hhc1ZhbHVlJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2hhc1ZhbHVlJywgKHJlY29yZDogVmFsdWUpID0+ICh2YWx1ZTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNSZWNvcmQocmVjb3JkKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZUJvb2woT2JqZWN0LnZhbHVlcyhyZWNvcmQuZmllbGRzKS5pbmNsdWRlcyh2YWx1ZSkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2hhc1ZhbHVlIHJlcXVpcmVzIGEgcmVjb3JkJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdzZXQnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbihcblx0XHRcdFx0XHQnc2V0Jyxcblx0XHRcdFx0XHQoYWNjZXNzb3I6IFZhbHVlKSA9PiAocmVjb3JkOiBWYWx1ZSkgPT4gKG5ld1ZhbHVlOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGlzTmF0aXZlRnVuY3Rpb24oYWNjZXNzb3IpICYmIGlzUmVjb3JkKHJlY29yZCkpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRm9yIG5vdywganVzdCBoYW5kbGUgc2ltcGxlIGZpZWxkIGFjY2Vzc29yc1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWVsZCA9IGFjY2Vzc29yLm5hbWU/LnJlcGxhY2UoJ0AnLCAnJyk7XG5cdFx0XHRcdFx0XHRcdGlmIChmaWVsZCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVSZWNvcmQoeyAuLi5yZWNvcmQuZmllbGRzLCBbZmllbGRdOiBuZXdWYWx1ZSB9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdzZXQgcmVxdWlyZXMgYW4gYWNjZXNzb3IsIHJlY29yZCwgYW5kIG5ldyB2YWx1ZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gVHVwbGUgb3BlcmF0aW9uc1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCd0dXBsZUxlbmd0aCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCd0dXBsZUxlbmd0aCcsICh0dXBsZTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNUdXBsZSh0dXBsZSkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVOdW1iZXIodHVwbGUudmFsdWVzLmxlbmd0aCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcigndHVwbGVMZW5ndGggcmVxdWlyZXMgYSB0dXBsZScpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQndHVwbGVJc0VtcHR5Jyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ3R1cGxlSXNFbXB0eScsICh0dXBsZTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNUdXBsZSh0dXBsZSkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVCb29sKHR1cGxlLnZhbHVlcy5sZW5ndGggPT09IDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ3R1cGxlSXNFbXB0eSByZXF1aXJlcyBhIHR1cGxlJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBCdWlsdC1pbiBBRFQgY29uc3RydWN0b3JzIGFyZSBub3cgc2VsZi1ob3N0ZWQgaW4gc3RkbGliLm5vb1xuXG5cdFx0XHQvLyBPcHRpb24gdXRpbGl0eSBmdW5jdGlvbnNcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnaXNTb21lJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2lzU29tZScsIChvcHRpb246IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzQ29uc3RydWN0b3Iob3B0aW9uKSAmJiBvcHRpb24ubmFtZSA9PT0gJ1NvbWUnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlVHJ1ZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNDb25zdHJ1Y3RvcihvcHRpb24pICYmIG9wdGlvbi5uYW1lID09PSAnTm9uZScpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVGYWxzZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2lzU29tZSByZXF1aXJlcyBhbiBPcHRpb24gdmFsdWUnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnaXNOb25lJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2lzTm9uZScsIChvcHRpb246IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzQ29uc3RydWN0b3Iob3B0aW9uKSAmJiBvcHRpb24ubmFtZSA9PT0gJ05vbmUnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlVHJ1ZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNDb25zdHJ1Y3RvcihvcHRpb24pICYmIG9wdGlvbi5uYW1lID09PSAnU29tZScpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVGYWxzZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2lzTm9uZSByZXF1aXJlcyBhbiBPcHRpb24gdmFsdWUnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQndW53cmFwJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ3Vud3JhcCcsIChvcHRpb246IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0aXNDb25zdHJ1Y3RvcihvcHRpb24pICYmXG5cdFx0XHRcdFx0XHRvcHRpb24ubmFtZSA9PT0gJ1NvbWUnICYmXG5cdFx0XHRcdFx0XHRvcHRpb24uYXJncy5sZW5ndGggPT09IDFcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBvcHRpb24uYXJnc1swXTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQ29uc3RydWN0b3Iob3B0aW9uKSAmJiBvcHRpb24ubmFtZSA9PT0gJ05vbmUnKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1bndyYXAgTm9uZSB2YWx1ZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ3Vud3JhcCByZXF1aXJlcyBhIFNvbWUgdmFsdWUnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJlc3VsdCB1dGlsaXR5IGZ1bmN0aW9uc1xuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdpc09rJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2lzT2snLCAocmVzdWx0OiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChpc0NvbnN0cnVjdG9yKHJlc3VsdCkgJiYgcmVzdWx0Lm5hbWUgPT09ICdPaycpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVUcnVlKCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc0NvbnN0cnVjdG9yKHJlc3VsdCkgJiYgcmVzdWx0Lm5hbWUgPT09ICdFcnInKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRmFsc2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpc09rIHJlcXVpcmVzIGEgUmVzdWx0IHZhbHVlJyk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J2lzRXJyJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2lzRXJyJywgKHJlc3VsdDogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaXNDb25zdHJ1Y3RvcihyZXN1bHQpICYmIHJlc3VsdC5uYW1lID09PSAnRXJyJykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZVRydWUoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQ29uc3RydWN0b3IocmVzdWx0KSAmJiByZXN1bHQubmFtZSA9PT0gJ09rJykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZUZhbHNlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignaXNFcnIgcmVxdWlyZXMgYSBSZXN1bHQgdmFsdWUnKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIE1pc3NpbmcgYnVpbHRpbiBpbXBsZW1lbnRhdGlvbnNcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQncHJpbnRsbicsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdwcmludGxuJywgKHZhbHVlOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHZhbHVlVG9TdHJpbmcodmFsdWUpKTtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J3JlYWRGaWxlJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ3JlYWRGaWxlJywgKHBhdGg6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCFpc1N0cmluZyhwYXRoKSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdyZWFkRmlsZSByZXF1aXJlcyBhIHN0cmluZyBwYXRoJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gdGhpcy5mcy5yZWFkRmlsZVN5bmMocGF0aC52YWx1ZSwgJ3V0Zi04Jyk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlU3RyaW5nKGNvbnRlbnQpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZWFkIGZpbGU6ICR7ZXJyb3J9YCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCd3cml0ZUZpbGUnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignd3JpdGVGaWxlJywgKHBhdGg6IFZhbHVlKSA9PiAoY29udGVudDogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoIWlzU3RyaW5nKHBhdGgpKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlRmlsZSByZXF1aXJlcyBhIHN0cmluZyBwYXRoJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICghaXNTdHJpbmcoY29udGVudCkpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignd3JpdGVGaWxlIHJlcXVpcmVzIHN0cmluZyBjb250ZW50Jyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHR0aGlzLmZzLndyaXRlRmlsZVN5bmMocGF0aC52YWx1ZSwgY29udGVudC52YWx1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlVW5pdCgpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB3cml0ZSBmaWxlOiAke2Vycm9yfWApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KFxuXHRcdFx0XHQnbG9nJyxcblx0XHRcdFx0Y3JlYXRlTmF0aXZlRnVuY3Rpb24oJ2xvZycsIChtZXNzYWdlOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmICghaXNTdHJpbmcobWVzc2FnZSkpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignbG9nIHJlcXVpcmVzIGEgc3RyaW5nIG1lc3NhZ2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFtMT0ddICR7bWVzc2FnZS52YWx1ZX1gKTtcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlVW5pdCgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdyYW5kb20nLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbigncmFuZG9tJywgKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBjcmVhdGVOdW1iZXIoXG5cdFx0XHRcdFx0XHRNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUilcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdyYW5kb21SYW5nZScsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdyYW5kb21SYW5nZScsIChtaW46IFZhbHVlKSA9PiAobWF4OiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmICghaXNOdW1iZXIobWluKSB8fCAhaXNOdW1iZXIobWF4KSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdyYW5kb21SYW5nZSByZXF1aXJlcyBudW1iZXIgYXJndW1lbnRzJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IG1pblZhbCA9IE1hdGgubWluKG1pbi52YWx1ZSwgbWF4LnZhbHVlKTtcblx0XHRcdFx0XHRjb25zdCBtYXhWYWwgPSBNYXRoLm1heChtaW4udmFsdWUsIG1heC52YWx1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZU51bWJlcihcblx0XHRcdFx0XHRcdE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXhWYWwgLSBtaW5WYWwgKyAxKSkgKyBtaW5WYWxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoXG5cdFx0XHRcdCdtdXRTZXQnLFxuXHRcdFx0XHRjcmVhdGVOYXRpdmVGdW5jdGlvbignbXV0U2V0JywgKHJlZjogVmFsdWUpID0+ICh2YWx1ZTogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAoIWlzQ2VsbChyZWYpKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ211dFNldCByZXF1aXJlcyBhIG11dGFibGUgcmVmZXJlbmNlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlZi52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybiBjcmVhdGVVbml0KCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0J211dEdldCcsXG5cdFx0XHRcdGNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKCdtdXRHZXQnLCAocmVmOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmICghaXNDZWxsKHJlZikpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignbXV0R2V0IHJlcXVpcmVzIGEgbXV0YWJsZSByZWZlcmVuY2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlZi52YWx1ZTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBsb2FkU3RkbGliKCk6IHZvaWQge1xuXHRcdFx0Ly8gVHJ5IG11bHRpcGxlIHBvc3NpYmxlIHBhdGhzIGZvciBzdGRsaWIubm9vXG5cdFx0XHRjb25zdCBwb3NzaWJsZVBhdGhzID0gW1xuXHRcdFx0XHR0aGlzLnBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdzdGRsaWIubm9vJyksXG5cdFx0XHRcdHRoaXMucGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzdGRsaWIubm9vJyksXG5cdFx0XHRcdHRoaXMucGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzcmMnLCAnLi4nLCAnc3RkbGliLm5vbycpLFxuXHRcdFx0XTtcblxuXG5cblx0XHRcdGxldCBzdGRsaWJQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRcdGZvciAoY29uc3QgcGF0aCBvZiBwb3NzaWJsZVBhdGhzKSB7XG5cdFx0XHRcdGlmICh0aGlzLmZzLmV4aXN0c1N5bmMocGF0aCkpIHtcblx0XHRcdFx0XHRzdGRsaWJQYXRoID0gcGF0aDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXN0ZGxpYlBhdGgpIHtcblx0XHRcdFx0Y29uc3QgbXNnID0gYFtOb29sYW5nIEVSUk9SXSBDb3VsZCBub3QgZmluZCBzdGRsaWIubm9vIGluIGFueSBvZiB0aGVzZSBwYXRoczpcXG4gICR7cG9zc2libGVQYXRocy5qb2luKFxuXHRcdFx0XHRcdCdcXG4gICdcblx0XHRcdFx0KX1gO1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKG1zZyk7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihtc2cpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgc3RkbGliQ29udGVudCA9IHRoaXMuZnMucmVhZEZpbGVTeW5jKHN0ZGxpYlBhdGgsICd1dGYtOCcpO1xuXHRcdFx0Y29uc3QgbGV4ZXIgPSBuZXcgTGV4ZXIoc3RkbGliQ29udGVudCk7XG5cdFx0XHRjb25zdCB0b2tlbnMgPSBsZXhlci50b2tlbml6ZSgpO1xuXHRcdFx0Y29uc3Qgc3RkbGliUHJvZ3JhbSA9IHBhcnNlKHRva2Vucyk7XG5cdFx0XHRjb25zdCBhbGxTdGF0ZW1lbnRzOiBFeHByZXNzaW9uW10gPSBbXTtcblx0XHRcdGZvciAoY29uc3Qgc3RhdGVtZW50IG9mIHN0ZGxpYlByb2dyYW0uc3RhdGVtZW50cykge1xuXHRcdFx0XHRhbGxTdGF0ZW1lbnRzLnB1c2goLi4uZmxhdHRlblN0YXRlbWVudHMoc3RhdGVtZW50KSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGNvbnN0IHN0YXRlbWVudCBvZiBhbGxTdGF0ZW1lbnRzKSB7XG5cdFx0XHRcdHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKHN0YXRlbWVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZXZhbHVhdGVQcm9ncmFtKHByb2dyYW06IFByb2dyYW0sIGZpbGVQYXRoPzogc3RyaW5nKTogUHJvZ3JhbVJlc3VsdCB7XG5cdFx0XHRpZiAoZmlsZVBhdGgpIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50RmlsZURpciA9IHRoaXMucGF0aC5kaXJuYW1lKHRoaXMucGF0aC5yZXNvbHZlKGZpbGVQYXRoKSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGV4ZWN1dGlvblRyYWNlOiBFeGVjdXRpb25TdGVwW10gPSBbXTtcblxuXHRcdFx0aWYgKHByb2dyYW0uc3RhdGVtZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRmaW5hbFJlc3VsdDogY3JlYXRlTGlzdChbXSksXG5cdFx0XHRcdFx0ZXhlY3V0aW9uVHJhY2UsXG5cdFx0XHRcdFx0ZW52aXJvbm1lbnQ6IG5ldyBNYXAoXG5cdFx0XHRcdFx0XHRBcnJheS5mcm9tKHRoaXMuZW52aXJvbm1lbnQuZW50cmllcygpKS5tYXAoKFtrLCB2XSkgPT4gW1xuXHRcdFx0XHRcdFx0XHRrLFxuXHRcdFx0XHRcdFx0XHRpc0NlbGwodikgPyB2LnZhbHVlIDogdixcblx0XHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdGxldCBmaW5hbFJlc3VsdDogVmFsdWUgPSBjcmVhdGVMaXN0KFtdKTtcblxuXHRcdFx0Zm9yIChjb25zdCBzdGF0ZW1lbnQgb2YgcHJvZ3JhbS5zdGF0ZW1lbnRzKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKHN0YXRlbWVudCk7XG5cblx0XHRcdFx0Ly8gQWRkIHRvIGV4ZWN1dGlvbiB0cmFjZVxuXHRcdFx0XHRleGVjdXRpb25UcmFjZS5wdXNoKHtcblx0XHRcdFx0XHRleHByZXNzaW9uOiB0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhzdGF0ZW1lbnQpLFxuXHRcdFx0XHRcdHJlc3VsdDogcmVzdWx0LFxuXHRcdFx0XHRcdGxvY2F0aW9uOiB7XG5cdFx0XHRcdFx0XHRsaW5lOiBzdGF0ZW1lbnQubG9jYXRpb24uc3RhcnQubGluZSxcblx0XHRcdFx0XHRcdGNvbHVtbjogc3RhdGVtZW50LmxvY2F0aW9uLnN0YXJ0LmNvbHVtbixcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRmaW5hbFJlc3VsdCA9IHJlc3VsdDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZmluYWxSZXN1bHQsXG5cdFx0XHRcdGV4ZWN1dGlvblRyYWNlLFxuXHRcdFx0XHRlbnZpcm9ubWVudDogbmV3IE1hcChcblx0XHRcdFx0XHRBcnJheS5mcm9tKHRoaXMuZW52aXJvbm1lbnQuZW50cmllcygpKS5tYXAoKFtrLCB2XSkgPT4gW1xuXHRcdFx0XHRcdFx0ayxcblx0XHRcdFx0XHRcdGlzQ2VsbCh2KSA/IHYudmFsdWUgOiB2LFxuXHRcdFx0XHRcdF0pLFxuXHRcdFx0XHQpLFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRwcml2YXRlIGV2YWx1YXRlRGVmaW5pdGlvbihkZWY6IERlZmluaXRpb25FeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBkZWZpbml0aW9uIG1pZ2h0IGJlIHJlY3Vyc2l2ZSBieSBsb29raW5nIGZvciB0aGUgbmFtZSBpbiB0aGUgdmFsdWVcblx0XHRcdGNvbnN0IGlzUmVjdXJzaXZlID0gdGhpcy5jb250YWluc1ZhcmlhYmxlKGRlZi52YWx1ZSwgZGVmLm5hbWUpO1xuXG5cdFx0XHRpZiAoaXNSZWN1cnNpdmUpIHtcblx0XHRcdFx0Ly8gRm9yIHJlY3Vyc2l2ZSBkZWZpbml0aW9ucywgd2UgbmVlZCBhIHBsYWNlaG9sZGVyIHRoYXQgZ2V0cyB1cGRhdGVkXG5cdFx0XHRcdGNvbnN0IGNlbGwgPSBjcmVhdGVDZWxsKGNyZWF0ZVVuaXQoKSk7XG5cdFx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KGRlZi5uYW1lLCBjZWxsKTtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihkZWYudmFsdWUpO1xuXHRcdFx0XHRjZWxsLnZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZvciBub24tcmVjdXJzaXZlIGRlZmluaXRpb25zLCBzdG9yZSB0aGUgdmFsdWUgZGlyZWN0bHlcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihkZWYudmFsdWUpO1xuXHRcdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChkZWYubmFtZSwgdmFsdWUpO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZU11dGFibGVEZWZpbml0aW9uKFxuXHRcdFx0ZXhwcjogTXV0YWJsZURlZmluaXRpb25FeHByZXNzaW9uLFxuXHRcdCk6IFZhbHVlIHtcblx0XHRcdC8vIEV2YWx1YXRlIHRoZSByaWdodC1oYW5kIHNpZGVcblx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci52YWx1ZSk7XG5cdFx0XHQvLyBTdG9yZSBhIGNlbGwgaW4gdGhlIGVudmlyb25tZW50XG5cdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChleHByLm5hbWUsIGNyZWF0ZUNlbGwodmFsdWUpKTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRwcml2YXRlIGV2YWx1YXRlTXV0YXRpb24oZXhwcjogTXV0YXRpb25FeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0Ly8gTG9vayB1cCB0aGUgdmFyaWFibGUgaW4gdGhlIGVudmlyb25tZW50XG5cdFx0XHRjb25zdCBjZWxsID0gdGhpcy5lbnZpcm9ubWVudC5nZXQoZXhwci50YXJnZXQpO1xuXHRcdFx0aWYgKCFpc0NlbGwoY2VsbCkpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbXV0YXRlIG5vbi1tdXRhYmxlIHZhcmlhYmxlOiAke2V4cHIudGFyZ2V0fWApO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRXZhbHVhdGUgdGhlIG5ldyB2YWx1ZVxuXHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnZhbHVlKTtcblx0XHRcdC8vIFVwZGF0ZSB0aGUgY2VsbCdzIHZhbHVlXG5cdFx0XHRjZWxsLnZhbHVlID0gdmFsdWU7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0ZXZhbHVhdGVFeHByZXNzaW9uKGV4cHI6IEV4cHJlc3Npb24pOiBWYWx1ZSB7XG5cdFx0XHRzd2l0Y2ggKGV4cHIua2luZCkge1xuXHRcdFx0XHRjYXNlIFwibGl0ZXJhbFwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlTGl0ZXJhbChleHByKTtcblxuXHRcdFx0XHRjYXNlIFwidmFyaWFibGVcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZVZhcmlhYmxlKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlRnVuY3Rpb24oZXhwcik7XG5cblx0XHRcdFx0Y2FzZSBcImFwcGxpY2F0aW9uXCI6XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuZXZhbHVhdGVBcHBsaWNhdGlvbihleHByKTtcblxuXHRcdFx0XHRjYXNlIFwicGlwZWxpbmVcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZVBpcGVsaW5lKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJiaW5hcnlcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUJpbmFyeShleHByKTtcblxuXHRcdFx0XHRjYXNlIFwiaWZcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUlmKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJkZWZpbml0aW9uXCI6XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuZXZhbHVhdGVEZWZpbml0aW9uKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJtdXRhYmxlLWRlZmluaXRpb25cIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZU11dGFibGVEZWZpbml0aW9uKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJtdXRhdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlTXV0YXRpb24oZXhwcik7XG5cblx0XHRcdFx0Y2FzZSBcImltcG9ydFwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlSW1wb3J0KGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJyZWNvcmRcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZVJlY29yZChleHByKTtcblxuXHRcdFx0XHRjYXNlIFwiYWNjZXNzb3JcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUFjY2Vzc29yKGV4cHIpO1xuXG5cdFx0XHRcdGNhc2UgXCJ0dXBsZVwiOiB7XG5cdFx0XHRcdFx0Ly8gRXZhbHVhdGUgYWxsIGVsZW1lbnRzIGFuZCByZXR1cm4gYSB0YWdnZWQgdHVwbGUgdmFsdWVcblx0XHRcdFx0XHRjb25zdCBlbGVtZW50cyA9IGV4cHIuZWxlbWVudHMubWFwKChlKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgdmFsID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZSk7XG5cdFx0XHRcdFx0XHRpZiAoaXNDZWxsKHZhbCkpIHZhbCA9IHZhbC52YWx1ZTtcblx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIGNyZWF0ZVR1cGxlKGVsZW1lbnRzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXNlIFwidW5pdFwiOiB7XG5cdFx0XHRcdFx0Ly8gUmV0dXJuIHVuaXQgdmFsdWVcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlVW5pdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhc2UgXCJsaXN0XCI6IHtcblx0XHRcdFx0XHQvLyBFdmFsdWF0ZSBhbGwgZWxlbWVudHMgYW5kIHJldHVybiBhIHRhZ2dlZCBsaXN0IHZhbHVlXG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudHMgPSBleHByLmVsZW1lbnRzLm1hcCgoZSkgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHZhbCA9IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGUpO1xuXHRcdFx0XHRcdFx0aWYgKGlzQ2VsbCh2YWwpKSB2YWwgPSB2YWwudmFsdWU7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiBjcmVhdGVMaXN0KGVsZW1lbnRzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXNlIFwid2hlcmVcIjoge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlV2hlcmUoZXhwcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2FzZSBcInR5cGVkXCI6XG5cdFx0XHRcdFx0Ly8gVHlwZSBhbm5vdGF0aW9ucyBhcmUgZXJhc2VkIGF0IHJ1bnRpbWU7IGp1c3QgZXZhbHVhdGUgdGhlIGlubmVyIGV4cHJlc3Npb25cblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5leHByZXNzaW9uKTtcblx0XHRcdFx0Y2FzZSBcImNvbnN0cmFpbmVkXCI6XG5cdFx0XHRcdFx0Ly8gQ29uc3RyYWludCBhbm5vdGF0aW9ucyBhcmUgZXJhc2VkIGF0IHJ1bnRpbWU7IGp1c3QgZXZhbHVhdGUgdGhlIGlubmVyIGV4cHJlc3Npb25cblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5leHByZXNzaW9uKTtcblx0XHRcdFx0Y2FzZSBcInR5cGUtZGVmaW5pdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlVHlwZURlZmluaXRpb24oZXhwciBhcyBUeXBlRGVmaW5pdGlvbkV4cHJlc3Npb24pO1xuXHRcdFx0XHRjYXNlIFwibWF0Y2hcIjpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZU1hdGNoKGV4cHIgYXMgTWF0Y2hFeHByZXNzaW9uKTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRgVW5rbm93biBleHByZXNzaW9uIGtpbmQ6ICR7KGV4cHIgYXMgRXhwcmVzc2lvbikua2luZH1gLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUxpdGVyYWwoZXhwcjogTGl0ZXJhbEV4cHJlc3Npb24pOiBWYWx1ZSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShleHByLnZhbHVlKSkge1xuXHRcdFx0XHQvLyBJZiBpdCdzIGEgbGlzdCwgZXZhbHVhdGUgZWFjaCBlbGVtZW50XG5cdFx0XHRcdHJldHVybiBjcmVhdGVMaXN0KFxuXHRcdFx0XHRcdGV4cHIudmFsdWUubWFwKChlbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudCA9PT0gXCJvYmplY3RcIiAmJiBcImtpbmRcIiBpbiBlbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdC8vIEl0J3MgYW4gQVNUIG5vZGUsIGV2YWx1YXRlIGl0XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlbGVtZW50IGFzIEV4cHJlc3Npb24pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gSXQncyBhbHJlYWR5IGEgdmFsdWVcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgcHJpbWl0aXZlIHZhbHVlcyB0byB0YWdnZWQgdmFsdWVzXG5cdFx0XHRpZiAodHlwZW9mIGV4cHIudmFsdWUgPT09IFwibnVtYmVyXCIpIHtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZU51bWJlcihleHByLnZhbHVlKTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGV4cHIudmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZVN0cmluZyhleHByLnZhbHVlKTtcblx0XHRcdH0gZWxzZSBpZiAoZXhwci52YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0XHQvLyBIYW5kbGUgdW5pdCBsaXRlcmFscyAobnVsbCBpbiBBU1QgcmVwcmVzZW50cyB1bml0KVxuXHRcdFx0XHRyZXR1cm4gY3JlYXRlVW5pdCgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTaG91bGQgbm90IHJlYWNoIGhlcmUgYW55bW9yZSBzaW5jZSB3ZSByZW1vdmVkIGJvb2xlYW4gbGl0ZXJhbHNcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbGl0ZXJhbCB2YWx1ZTogJHtleHByLnZhbHVlfWApO1xuXHRcdH1cblxuXHRcdHByaXZhdGUgZXZhbHVhdGVWYXJpYWJsZShleHByOiBWYXJpYWJsZUV4cHJlc3Npb24pOiBWYWx1ZSB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuZW52aXJvbm1lbnQuZ2V0KGV4cHIubmFtZSk7XG5cdFx0XHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yKFxuXHRcdFx0XHRcdFwiUnVudGltZUVycm9yXCIsXG5cdFx0XHRcdFx0YFVuZGVmaW5lZCB2YXJpYWJsZTogJHtleHByLm5hbWV9YCxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRsaW5lOiBleHByLmxvY2F0aW9uLnN0YXJ0LmxpbmUsXG5cdFx0XHRcdFx0XHRjb2x1bW46IGV4cHIubG9jYXRpb24uc3RhcnQuY29sdW1uLFxuXHRcdFx0XHRcdFx0c3RhcnQ6IGV4cHIubG9jYXRpb24uc3RhcnQubGluZSxcblx0XHRcdFx0XHRcdGVuZDogZXhwci5sb2NhdGlvbi5lbmQubGluZSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGV4cHIubmFtZSxcblx0XHRcdFx0XHRgRGVmaW5lIHRoZSB2YXJpYWJsZSBiZWZvcmUgdXNpbmcgaXQ6ICR7ZXhwci5uYW1lfSA9IHZhbHVlYCxcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHR9XG5cdFx0XHQvLyBJZiBpdCdzIGEgY2VsbCwgcmV0dXJuIGl0cyB2YWx1ZVxuXHRcdFx0aWYgKGlzQ2VsbCh2YWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlLnZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdHByaXZhdGUgZXZhbHVhdGVGdW5jdGlvbihleHByOiBGdW5jdGlvbkV4cHJlc3Npb24pOiBWYWx1ZSB7XG5cdFx0XHRjb25zdCBzZWxmID0gdGhpcztcblx0XHRcdC8vIENyZWF0ZSBhIGNsb3N1cmUgdGhhdCBjYXB0dXJlcyB0aGUgY3VycmVudCBlbnZpcm9ubWVudFxuXHRcdFx0Y29uc3QgY2xvc3VyZUVudiA9IG5ldyBNYXAodGhpcy5lbnZpcm9ubWVudCk7XG5cblx0XHRcdGZ1bmN0aW9uIGNyZWF0ZUN1cnJpZWRGdW5jdGlvbihcblx0XHRcdFx0cGFyYW1zOiBzdHJpbmdbXSxcblx0XHRcdFx0Ym9keTogRXhwcmVzc2lvbixcblx0XHRcdCk6IFZhbHVlIHtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZUZ1bmN0aW9uKChhcmc6IFZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IGVudmlyb25tZW50IGZvciB0aGlzIGZ1bmN0aW9uIGNhbGxcblx0XHRcdFx0XHRjb25zdCBjYWxsRW52ID0gbmV3IE1hcChjbG9zdXJlRW52KTtcblxuXHRcdFx0XHRcdC8vIFNldCB0aGUgcGFyYW1ldGVyIGluIHRoZSBjYWxsIGVudmlyb25tZW50XG5cdFx0XHRcdFx0Y29uc3QgcGFyYW0gPSBwYXJhbXNbMF07XG5cdFx0XHRcdFx0Y2FsbEVudi5zZXQocGFyYW0sIGFyZyk7XG5cblx0XHRcdFx0XHRsZXQgcmVzdWx0OiBWYWx1ZTtcblx0XHRcdFx0XHRpZiAocGFyYW1zLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Ly8gVXNlIGVudmlyb25tZW50IHN0YWNraW5nIGZvciBlZmZpY2llbnQgc2NvcGluZ1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gc2VsZi53aXRoTmV3RW52aXJvbm1lbnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmVudmlyb25tZW50ID0gY2FsbEVudjtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHNlbGYuZXZhbHVhdGVFeHByZXNzaW9uKGJvZHkpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgY2FwdHVyZXMgdGhlIGN1cnJlbnQgcGFyYW1ldGVyXG5cdFx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdQYXJhbXMgPSBwYXJhbXMuc2xpY2UoMSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IG5leHRGdW5jdGlvbiA9IGNyZWF0ZUZ1bmN0aW9uKChuZXh0QXJnOiBWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0Q2FsbEVudiA9IG5ldyBNYXAoY2FsbEVudik7XG5cdFx0XHRcdFx0XHRcdG5leHRDYWxsRW52LnNldChyZW1haW5pbmdQYXJhbXNbMF0sIG5leHRBcmcpO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChyZW1haW5pbmdQYXJhbXMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHNlbGYud2l0aE5ld0Vudmlyb25tZW50KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZW52aXJvbm1lbnQgPSBuZXh0Q2FsbEVudjtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBzZWxmLmV2YWx1YXRlRXhwcmVzc2lvbihib2R5KTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDb250aW51ZSBjdXJyeWluZyBmb3IgcmVtYWluaW5nIHBhcmFtZXRlcnNcblx0XHRcdFx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdGdW5jdGlvbiA9IHNlbGYud2l0aE5ld0Vudmlyb25tZW50KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZW52aXJvbm1lbnQgPSBuZXh0Q2FsbEVudjtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBzZWxmLmV2YWx1YXRlRnVuY3Rpb24oe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQuLi5leHByLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJhbXM6IHJlbWFpbmluZ1BhcmFtcyxcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpc0Z1bmN0aW9uKHJlbWFpbmluZ0Z1bmN0aW9uKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlbWFpbmluZ0Z1bmN0aW9uLmZuKG5leHRBcmcpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGBFeHBlY3RlZCBmdW5jdGlvbiBidXQgZ290OiAke3R5cGVvZiByZW1haW5pbmdGdW5jdGlvbn1gLFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBuZXh0RnVuY3Rpb247XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBjcmVhdGVDdXJyaWVkRnVuY3Rpb24oZXhwci5wYXJhbXMsIGV4cHIuYm9keSk7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUFwcGxpY2F0aW9uKGV4cHI6IEFwcGxpY2F0aW9uRXhwcmVzc2lvbik6IFZhbHVlIHtcblx0XHRcdGNvbnN0IGZ1bmMgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLmZ1bmMpO1xuXG5cdFx0XHQvLyBPbmx5IGFwcGx5IHRoZSBmdW5jdGlvbiB0byB0aGUgYXJndW1lbnRzIHByZXNlbnQgaW4gdGhlIEFTVFxuXHRcdFx0Y29uc3QgYXJncyA9IGV4cHIuYXJncztcblxuXHRcdFx0aWYgKGlzRnVuY3Rpb24oZnVuYykpIHtcblx0XHRcdFx0Ly8gSGFuZGxlIHRhZ2dlZCBmdW5jdGlvbiBhcHBsaWNhdGlvblxuXHRcdFx0XHRsZXQgcmVzdWx0OiBhbnkgPSBmdW5jLmZuO1xuXG5cdFx0XHRcdGZvciAoY29uc3QgYXJnRXhwciBvZiBhcmdzKSB7XG5cdFx0XHRcdFx0bGV0IGFyZyA9IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGFyZ0V4cHIpO1xuXHRcdFx0XHRcdGlmIChpc0NlbGwoYXJnKSkgYXJnID0gYXJnLnZhbHVlO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IHJlc3VsdChhcmcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRcdGBDYW5ub3QgYXBwbHkgYXJndW1lbnQgdG8gbm9uLWZ1bmN0aW9uOiAke3R5cGVvZiByZXN1bHR9YCxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihmdW5jKSkge1xuXHRcdFx0XHQvLyBIYW5kbGUgbmF0aXZlIGZ1bmN0aW9uIGFwcGxpY2F0aW9uXG5cdFx0XHRcdGxldCByZXN1bHQ6IGFueSA9IGZ1bmMuZm47XG5cblx0XHRcdFx0Zm9yIChjb25zdCBhcmdFeHByIG9mIGFyZ3MpIHtcblx0XHRcdFx0XHRsZXQgYXJnID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oYXJnRXhwcik7XG5cdFx0XHRcdFx0aWYgKGlzQ2VsbChhcmcpKSBhcmcgPSBhcmcudmFsdWU7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gcmVzdWx0KGFyZyk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc0Z1bmN0aW9uKHJlc3VsdCkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IHJlc3VsdC5mbihhcmcpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihyZXN1bHQpKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSByZXN1bHQuZm4oYXJnKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0XHRgQ2Fubm90IGFwcGx5IGFyZ3VtZW50IHRvIG5vbi1mdW5jdGlvbjogJHt0eXBlb2YgcmVzdWx0fWAsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0YENhbm5vdCBhcHBseSBub24tZnVuY3Rpb246ICR7dHlwZW9mIGZ1bmN9ICgke2Z1bmM/LnRhZyB8fCBcInVua25vd25cIn0pYCxcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRwcml2YXRlIGV2YWx1YXRlUGlwZWxpbmUoZXhwcjogUGlwZWxpbmVFeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0Ly8gUGlwZWxpbmUgc2hvdWxkIGJlIGZ1bmN0aW9uIGNvbXBvc2l0aW9uLCBub3QgZnVuY3Rpb24gYXBwbGljYXRpb25cblx0XHRcdC8vIEZvciBhIHBpcGVsaW5lIGxpa2UgZiB8PiBnIHw+IGgsIHdlIHdhbnQgdG8gY29tcG9zZSB0aGVtIGFzIGgoZyhmKHgpKSlcblxuXHRcdFx0aWYgKGV4cHIuc3RlcHMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnN0ZXBzWzBdKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgd2l0aCB0aGUgZmlyc3QgZnVuY3Rpb25cblx0XHRcdGxldCBjb21wb3NlZCA9IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGV4cHIuc3RlcHNbMF0pO1xuXG5cdFx0XHQvLyBDb21wb3NlIHdpdGggZWFjaCBzdWJzZXF1ZW50IGZ1bmN0aW9uXG5cdFx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGV4cHIuc3RlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgbmV4dEZ1bmMgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnN0ZXBzW2ldKTtcblxuXHRcdFx0XHRpZiAoaXNGdW5jdGlvbihjb21wb3NlZCkgJiYgaXNGdW5jdGlvbihuZXh0RnVuYykpIHtcblx0XHRcdFx0XHQvLyBDb21wb3NlOiBuZXh0RnVuYyhjb21wb3NlZCh4KSlcblx0XHRcdFx0XHRjb25zdCBjb21wb3NlZEZuID0gY29tcG9zZWQgYXMge1xuXHRcdFx0XHRcdFx0dGFnOiBcImZ1bmN0aW9uXCI7XG5cdFx0XHRcdFx0XHRmbjogKC4uLmFyZ3M6IFZhbHVlW10pID0+IFZhbHVlO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgbmV4dEZ1bmNGbiA9IG5leHRGdW5jIGFzIHtcblx0XHRcdFx0XHRcdHRhZzogXCJmdW5jdGlvblwiO1xuXHRcdFx0XHRcdFx0Zm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbXBvc2VkID0gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PlxuXHRcdFx0XHRcdFx0bmV4dEZ1bmNGbi5mbihjb21wb3NlZEZuLmZuKHgpKSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGlzTmF0aXZlRnVuY3Rpb24oY29tcG9zZWQpICYmIGlzTmF0aXZlRnVuY3Rpb24obmV4dEZ1bmMpKSB7XG5cdFx0XHRcdFx0Ly8gQ29tcG9zZTogbmV4dEZ1bmMoY29tcG9zZWQoeCkpXG5cdFx0XHRcdFx0Y29uc3QgY29tcG9zZWRGbiA9IGNvbXBvc2VkIGFzIHtcblx0XHRcdFx0XHRcdHRhZzogXCJuYXRpdmVcIjtcblx0XHRcdFx0XHRcdG5hbWU6IHN0cmluZztcblx0XHRcdFx0XHRcdGZuOiAoLi4uYXJnczogVmFsdWVbXSkgPT4gVmFsdWU7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb25zdCBuZXh0RnVuY0ZuID0gbmV4dEZ1bmMgYXMge1xuXHRcdFx0XHRcdFx0dGFnOiBcIm5hdGl2ZVwiO1xuXHRcdFx0XHRcdFx0bmFtZTogc3RyaW5nO1xuXHRcdFx0XHRcdFx0Zm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbXBvc2VkID0gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PlxuXHRcdFx0XHRcdFx0bmV4dEZ1bmNGbi5mbihjb21wb3NlZEZuLmZuKHgpKSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGlzRnVuY3Rpb24oY29tcG9zZWQpICYmIGlzTmF0aXZlRnVuY3Rpb24obmV4dEZ1bmMpKSB7XG5cdFx0XHRcdFx0Ly8gQ29tcG9zZTogbmV4dEZ1bmMoY29tcG9zZWQoeCkpXG5cdFx0XHRcdFx0Y29uc3QgY29tcG9zZWRGbiA9IGNvbXBvc2VkIGFzIHtcblx0XHRcdFx0XHRcdHRhZzogXCJmdW5jdGlvblwiO1xuXHRcdFx0XHRcdFx0Zm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbnN0IG5leHRGdW5jRm4gPSBuZXh0RnVuYyBhcyB7XG5cdFx0XHRcdFx0XHR0YWc6IFwibmF0aXZlXCI7XG5cdFx0XHRcdFx0XHRuYW1lOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRmbjogKC4uLmFyZ3M6IFZhbHVlW10pID0+IFZhbHVlO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29tcG9zZWQgPSBjcmVhdGVGdW5jdGlvbigoeDogVmFsdWUpID0+XG5cdFx0XHRcdFx0XHRuZXh0RnVuY0ZuLmZuKGNvbXBvc2VkRm4uZm4oeCkpLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihjb21wb3NlZCkgJiYgaXNGdW5jdGlvbihuZXh0RnVuYykpIHtcblx0XHRcdFx0XHQvLyBDb21wb3NlOiBuZXh0RnVuYyhjb21wb3NlZCh4KSlcblx0XHRcdFx0XHRjb25zdCBjb21wb3NlZEZuID0gY29tcG9zZWQgYXMge1xuXHRcdFx0XHRcdFx0dGFnOiBcIm5hdGl2ZVwiO1xuXHRcdFx0XHRcdFx0bmFtZTogc3RyaW5nO1xuXHRcdFx0XHRcdFx0Zm46ICguLi5hcmdzOiBWYWx1ZVtdKSA9PiBWYWx1ZTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbnN0IG5leHRGdW5jRm4gPSBuZXh0RnVuYyBhcyB7XG5cdFx0XHRcdFx0XHR0YWc6IFwiZnVuY3Rpb25cIjtcblx0XHRcdFx0XHRcdGZuOiAoLi4uYXJnczogVmFsdWVbXSkgPT4gVmFsdWU7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb21wb3NlZCA9IGNyZWF0ZUZ1bmN0aW9uKCh4OiBWYWx1ZSkgPT5cblx0XHRcdFx0XHRcdG5leHRGdW5jRm4uZm4oY29tcG9zZWRGbi5mbih4KSksXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRgQ2Fubm90IGNvbXBvc2Ugbm9uLWZ1bmN0aW9ucyBpbiBwaXBlbGluZTogJHt2YWx1ZVRvU3RyaW5nKFxuXHRcdFx0XHRcdFx0XHRjb21wb3NlZCxcblx0XHRcdFx0XHRcdCl9IGFuZCAke3ZhbHVlVG9TdHJpbmcobmV4dEZ1bmMpfWAsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gY29tcG9zZWQ7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUJpbmFyeShleHByOiBCaW5hcnlFeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0aWYgKGV4cHIub3BlcmF0b3IgPT09ICc7Jykge1xuXHRcdFx0XHQvLyBIYW5kbGUgc2VtaWNvbG9uIG9wZXJhdG9yIChzZXF1ZW5jZSlcblx0XHRcdFx0Ly8gRXZhbHVhdGUgbGVmdCBleHByZXNzaW9uIGFuZCBkaXNjYXJkIHJlc3VsdFxuXHRcdFx0XHR0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLmxlZnQpO1xuXHRcdFx0XHQvLyBFdmFsdWF0ZSBhbmQgcmV0dXJuIHJpZ2h0IGV4cHJlc3Npb25cblx0XHRcdFx0cmV0dXJuIHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGV4cHIucmlnaHQpO1xuXHRcdFx0fSBlbHNlIGlmIChleHByLm9wZXJhdG9yID09PSAnfCcpIHtcblx0XHRcdFx0Ly8gSGFuZGxlIHRocnVzaCBvcGVyYXRvclxuXHRcdFx0XHRjb25zdCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgcmlnaHQgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnJpZ2h0KTtcblxuXHRcdFx0XHRpZiAoaXNGdW5jdGlvbihyaWdodCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmlnaHQuZm4obGVmdCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihyaWdodCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmlnaHQuZm4obGVmdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBhcHBseSBub24tZnVuY3Rpb24gaW4gdGhydXNoOiAke3ZhbHVlVG9TdHJpbmcocmlnaHQpfWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGV4cHIub3BlcmF0b3IgPT09ICd8PicpIHtcblx0XHRcdFx0Ly8gSGFuZGxlIHBpcGVsaW5lIG9wZXJhdG9yIChsZWZ0LXRvLXJpZ2h0IGNvbXBvc2l0aW9uKVxuXHRcdFx0XHRjb25zdCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgcmlnaHQgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnJpZ2h0KTtcblxuXHRcdFx0XHRpZiAoaXNGdW5jdGlvbihsZWZ0KSAmJiBpc0Z1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIExlZnQtdG8tcmlnaHQgY29tcG9zaXRpb246IGcoZih4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiByaWdodC5mbihsZWZ0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihsZWZ0KSAmJiBpc05hdGl2ZUZ1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIExlZnQtdG8tcmlnaHQgY29tcG9zaXRpb246IGcoZih4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiByaWdodC5mbihsZWZ0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNGdW5jdGlvbihsZWZ0KSAmJiBpc05hdGl2ZUZ1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIExlZnQtdG8tcmlnaHQgY29tcG9zaXRpb246IGcoZih4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiByaWdodC5mbihsZWZ0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihsZWZ0KSAmJiBpc0Z1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIExlZnQtdG8tcmlnaHQgY29tcG9zaXRpb246IGcoZih4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiByaWdodC5mbihsZWZ0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBjb21wb3NlIG5vbi1mdW5jdGlvbnMgaW4gcGlwZWxpbmU6ICR7dmFsdWVUb1N0cmluZyhcblx0XHRcdFx0XHRcdFx0bGVmdFxuXHRcdFx0XHRcdFx0KX0gYW5kICR7dmFsdWVUb1N0cmluZyhyaWdodCl9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZXhwci5vcGVyYXRvciA9PT0gJzx8Jykge1xuXHRcdFx0XHQvLyBIYW5kbGUgcmlnaHQtdG8tbGVmdCBjb21wb3NpdGlvbiBvcGVyYXRvclxuXHRcdFx0XHRjb25zdCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgcmlnaHQgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnJpZ2h0KTtcblxuXHRcdFx0XHRpZiAoaXNGdW5jdGlvbihsZWZ0KSAmJiBpc0Z1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIFJpZ2h0LXRvLWxlZnQ6IGYoZyh4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiBsZWZ0LmZuKHJpZ2h0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbihsZWZ0KSAmJiBpc05hdGl2ZUZ1bmN0aW9uKHJpZ2h0KSkge1xuXHRcdFx0XHRcdC8vIFJpZ2h0LXRvLWxlZnQ6IGYoZyh4KSlcblx0XHRcdFx0XHRyZXR1cm4gY3JlYXRlRnVuY3Rpb24oKHg6IFZhbHVlKSA9PiBsZWZ0LmZuKHJpZ2h0LmZuKHgpKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YENhbm5vdCBjb21wb3NlIG5vbi1mdW5jdGlvbnM6ICR7dmFsdWVUb1N0cmluZyhcblx0XHRcdFx0XHRcdFx0bGVmdFxuXHRcdFx0XHRcdFx0KX0gYW5kICR7dmFsdWVUb1N0cmluZyhyaWdodCl9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEhhbmRsZSBvdGhlciBiaW5hcnkgb3BlcmF0b3JzIChhcml0aG1ldGljLCBjb21wYXJpc29uLCBldGMuKVxuXHRcdFx0XHRjb25zdCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgcmlnaHQgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnJpZ2h0KTtcblx0XHRcdFx0Y29uc3QgbGVmdFZhbCA9IGlzQ2VsbChsZWZ0KSA/IGxlZnQudmFsdWUgOiBsZWZ0O1xuXHRcdFx0XHRjb25zdCByaWdodFZhbCA9IGlzQ2VsbChyaWdodCkgPyByaWdodC52YWx1ZSA6IHJpZ2h0O1xuXG5cdFx0XHRcdGNvbnN0IG9wZXJhdG9yID0gdGhpcy5lbnZpcm9ubWVudC5nZXQoZXhwci5vcGVyYXRvcik7XG5cdFx0XHRcdGNvbnN0IG9wZXJhdG9yVmFsID0gaXNDZWxsKG9wZXJhdG9yKSA/IG9wZXJhdG9yLnZhbHVlIDogb3BlcmF0b3I7XG5cdFx0XHRcdGlmIChvcGVyYXRvclZhbCAmJiBpc05hdGl2ZUZ1bmN0aW9uKG9wZXJhdG9yVmFsKSkge1xuXHRcdFx0XHRcdGNvbnN0IGZuOiBhbnkgPSBvcGVyYXRvclZhbC5mbihsZWZ0VmFsKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4ocmlnaHRWYWwpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNGdW5jdGlvbihmbikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbi5mbihyaWdodFZhbCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc05hdGl2ZUZ1bmN0aW9uKGZuKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuLmZuKHJpZ2h0VmFsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YE9wZXJhdG9yICR7ZXhwci5vcGVyYXRvcn0gZGlkIG5vdCByZXR1cm4gYSBmdW5jdGlvbmBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG9wZXJhdG9yOiAke2V4cHIub3BlcmF0b3J9YCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUlmKGV4cHI6IElmRXhwcmVzc2lvbik6IFZhbHVlIHtcblx0XHRcdGNvbnN0IGNvbmRpdGlvbiA9IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGV4cHIuY29uZGl0aW9uKTtcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgY29uZGl0aW9uIGlzIHRydXRoeSAtIGhhbmRsZSB0YWdnZWQgYm9vbGVhbiB2YWx1ZXNcblx0XHRcdGxldCBpc1RydXRoeSA9IGZhbHNlO1xuXHRcdFx0aWYgKGlzQm9vbChjb25kaXRpb24pKSB7XG5cdFx0XHRcdGlzVHJ1dGh5ID0gYm9vbFZhbHVlKGNvbmRpdGlvbik7XG5cdFx0XHR9IGVsc2UgaWYgKGlzTnVtYmVyKGNvbmRpdGlvbikpIHtcblx0XHRcdFx0aXNUcnV0aHkgPSBjb25kaXRpb24udmFsdWUgIT09IDA7XG5cdFx0XHR9IGVsc2UgaWYgKGlzU3RyaW5nKGNvbmRpdGlvbikpIHtcblx0XHRcdFx0aXNUcnV0aHkgPSBjb25kaXRpb24udmFsdWUgIT09IFwiXCI7XG5cdFx0XHR9IGVsc2UgaWYgKGlzVW5pdChjb25kaXRpb24pKSB7XG5cdFx0XHRcdGlzVHJ1dGh5ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZvciBvdGhlciB0eXBlcyAoZnVuY3Rpb25zLCBsaXN0cywgcmVjb3JkcyksIGNvbnNpZGVyIHRoZW0gdHJ1dGh5XG5cdFx0XHRcdGlzVHJ1dGh5ID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGlzVHJ1dGh5KSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLnRoZW4pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKGV4cHIuZWxzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUltcG9ydChleHByOiBJbXBvcnRFeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBleHByLnBhdGguZW5kc1dpdGgoXCIubm9vXCIpXG5cdFx0XHRcdFx0PyBleHByLnBhdGhcblx0XHRcdFx0XHQ6IGAke2V4cHIucGF0aH0ubm9vYDtcblxuXHRcdFx0XHRsZXQgZnVsbFBhdGg6IHN0cmluZztcblx0XHRcdFx0aWYgKHRoaXMucGF0aC5pc0Fic29sdXRlKGZpbGVQYXRoKSkge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gZmlsZVBhdGg7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50RmlsZURpcikge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gdGhpcy5wYXRoLnJlc29sdmUodGhpcy5jdXJyZW50RmlsZURpciwgZmlsZVBhdGgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gdGhpcy5wYXRoLnJlc29sdmUoZmlsZVBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgY29udGVudCA9IHRoaXMuZnMucmVhZEZpbGVTeW5jKGZ1bGxQYXRoLCBcInV0ZjhcIik7XG5cdFx0XHRcdGNvbnN0IGxleGVyID0gbmV3IExleGVyKGNvbnRlbnQpO1xuXHRcdFx0XHRjb25zdCB0b2tlbnMgPSBsZXhlci50b2tlbml6ZSgpO1xuXHRcdFx0XHRjb25zdCBwcm9ncmFtID0gcGFyc2UodG9rZW5zKTtcblx0XHRcdFx0Y29uc3QgdGVtcEV2YWx1YXRvciA9IG5ldyBFdmFsdWF0b3IoeyBmczogdGhpcy5mcywgcGF0aDogdGhpcy5wYXRoIH0pO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSB0ZW1wRXZhbHVhdG9yLmV2YWx1YXRlUHJvZ3JhbShwcm9ncmFtLCBmdWxsUGF0aCk7XG5cdFx0XHRcdHJldHVybiByZXN1bHQuZmluYWxSZXN1bHQ7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRsZXQgZXJyb3JNZXNzYWdlOiBzdHJpbmc7XG5cdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcblx0XHRcdFx0XHRpZiAoZXJyb3Iuc3RhY2spIHtcblx0XHRcdFx0XHRcdGVycm9yTWVzc2FnZSArPSBcIlxcblN0YWNrIHRyYWNlOlxcblwiICsgZXJyb3Iuc3RhY2s7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoX2UpIHtcblx0XHRcdFx0XHRcdGVycm9yTWVzc2FnZSA9IFN0cmluZyhlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycm9yTWVzc2FnZSA9IFN0cmluZyhlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKTtcblx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBleHByLnBhdGguZW5kc1dpdGgoXCIubm9vXCIpXG5cdFx0XHRcdFx0PyBleHByLnBhdGhcblx0XHRcdFx0XHQ6IGAke2V4cHIucGF0aH0ubm9vYDtcblxuXHRcdFx0XHRsZXQgZnVsbFBhdGg6IHN0cmluZztcblx0XHRcdFx0aWYgKHRoaXMucGF0aC5pc0Fic29sdXRlKGZpbGVQYXRoKSkge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gZmlsZVBhdGg7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50RmlsZURpcikge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gdGhpcy5wYXRoLnJlc29sdmUodGhpcy5jdXJyZW50RmlsZURpciwgZmlsZVBhdGgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGZ1bGxQYXRoID0gdGhpcy5wYXRoLnJlc29sdmUoZmlsZVBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RydWN0dXJlZEVycm9yID0gY3JlYXRlRXJyb3IoXG5cdFx0XHRcdFx0XCJJbXBvcnRFcnJvclwiLFxuXHRcdFx0XHRcdGBGYWlsZWQgdG8gaW1wb3J0ICcke1xuXHRcdFx0XHRcdFx0ZXhwci5wYXRoXG5cdFx0XHRcdFx0fSc6ICR7ZXJyb3JNZXNzYWdlfVxcbiAgVHJpZWQgdG8gcmVzb2x2ZTogJHtmdWxsUGF0aH1cXG4gIEN1cnJlbnQgd29ya2luZyBkaXJlY3Rvcnk6ICR7Y3dkfVxcbiAgSW1wb3J0aW5nIGZpbGUgZGlyZWN0b3J5OiAke1xuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50RmlsZURpciB8fCBcInVua25vd25cIlxuXHRcdFx0XHRcdH1cXG4gIFN1Z2dlc3Rpb246IFVzZSBhIHBhdGggcmVsYXRpdmUgdG8gdGhlIGltcG9ydGluZyBmaWxlLCBlLmcuLCAnbWF0aF9mdW5jdGlvbnMnIG9yICcuLi9zdGQvbWF0aCdgLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGxpbmU6IGV4cHIubG9jYXRpb24uc3RhcnQubGluZSxcblx0XHRcdFx0XHRcdGNvbHVtbjogZXhwci5sb2NhdGlvbi5zdGFydC5jb2x1bW4sXG5cdFx0XHRcdFx0XHRzdGFydDogZXhwci5sb2NhdGlvbi5zdGFydC5saW5lLFxuXHRcdFx0XHRcdFx0ZW5kOiBleHByLmxvY2F0aW9uLmVuZC5saW5lLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YGltcG9ydCBcIiR7ZXhwci5wYXRofVwiYCxcblx0XHRcdFx0XHRcIkNoZWNrIHRoYXQgdGhlIGZpbGUgZXhpc3RzIGFuZCBjYW4gYmUgcGFyc2VkLCBhbmQgdGhhdCB0aGUgcGF0aCBpcyBjb3JyZWN0IHJlbGF0aXZlIHRvIHRoZSBpbXBvcnRpbmcgZmlsZS5cIixcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhyb3cgc3RydWN0dXJlZEVycm9yO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHByaXZhdGUgZXZhbHVhdGVSZWNvcmQoZXhwcjogUmVjb3JkRXhwcmVzc2lvbik6IFZhbHVlIHtcblx0XHRcdGNvbnN0IHJlY29yZDogeyBba2V5OiBzdHJpbmddOiBWYWx1ZSB9ID0ge307XG5cdFx0XHRmb3IgKGNvbnN0IGZpZWxkIG9mIGV4cHIuZmllbGRzKSB7XG5cdFx0XHRcdGxldCB2YWwgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihmaWVsZC52YWx1ZSk7XG5cdFx0XHRcdGlmIChpc0NlbGwodmFsKSkgdmFsID0gdmFsLnZhbHVlO1xuXHRcdFx0XHRyZWNvcmRbZmllbGQubmFtZV0gPSB2YWw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY3JlYXRlUmVjb3JkKHJlY29yZCk7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZUFjY2Vzc29yKGV4cHI6IEFjY2Vzc29yRXhwcmVzc2lvbik6IFZhbHVlIHtcblx0XHRcdC8vIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSByZWNvcmQgYW5kIHJldHVybnMgdGhlIGZpZWxkIHZhbHVlXG5cdFx0XHRyZXR1cm4gY3JlYXRlTmF0aXZlRnVuY3Rpb24oYEAke2V4cHIuZmllbGR9YCwgKHJlY29yZDogVmFsdWUpOiBWYWx1ZSA9PiB7XG5cdFx0XHRcdGlmIChpc1JlY29yZChyZWNvcmQpKSB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBleHByLmZpZWxkO1xuXHRcdFx0XHRcdGlmIChmaWVsZCBpbiByZWNvcmQuZmllbGRzKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVjb3JkLmZpZWxkc1tmaWVsZF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmllbGQgJyR7ZXhwci5maWVsZH0nIG5vdCBmb3VuZCBpbiByZWNvcmRgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHByaXZhdGUgZXZhbHVhdGVXaGVyZShleHByOiBXaGVyZUV4cHJlc3Npb24pOiBWYWx1ZSB7XG5cdFx0XHQvLyBVc2UgZW52aXJvbm1lbnQgc3RhY2tpbmcgZm9yIHdoZXJlIGNsYXVzZVxuXHRcdFx0cmV0dXJuIHRoaXMud2l0aE5ld0Vudmlyb25tZW50KCgpID0+IHtcblx0XHRcdFx0Ly8gRXZhbHVhdGUgYWxsIGRlZmluaXRpb25zIGluIHRoZSB3aGVyZSBjbGF1c2Vcblx0XHRcdFx0Zm9yIChjb25zdCBkZWYgb2YgZXhwci5kZWZpbml0aW9ucykge1xuXHRcdFx0XHRcdGlmIChkZWYua2luZCA9PT0gXCJkZWZpbml0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZGVmLnZhbHVlKTtcblx0XHRcdFx0XHRcdHRoaXMuZW52aXJvbm1lbnQuc2V0KGRlZi5uYW1lLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkZWYua2luZCA9PT0gXCJtdXRhYmxlLWRlZmluaXRpb25cIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihkZWYudmFsdWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoZGVmLm5hbWUsIGNyZWF0ZUNlbGwodmFsdWUpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gRXZhbHVhdGUgdGhlIG1haW4gZXhwcmVzc2lvblxuXHRcdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZXhwci5tYWluKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHByaXZhdGUgY29udGFpbnNWYXJpYWJsZShleHByOiBFeHByZXNzaW9uLCB2YXJOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRcdHN3aXRjaCAoZXhwci5raW5kKSB7XG5cdFx0XHRcdGNhc2UgXCJ2YXJpYWJsZVwiOlxuXHRcdFx0XHRcdHJldHVybiBleHByLm5hbWUgPT09IHZhck5hbWU7XG5cdFx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0XHRcdC8vIERvbid0IGNoZWNrIGZ1bmN0aW9uIHBhcmFtZXRlcnNcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb250YWluc1ZhcmlhYmxlKGV4cHIuYm9keSwgdmFyTmFtZSk7XG5cdFx0XHRcdGNhc2UgXCJhcHBsaWNhdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5zVmFyaWFibGUoZXhwci5mdW5jLCB2YXJOYW1lKSB8fFxuXHRcdFx0XHRcdFx0ZXhwci5hcmdzLnNvbWUoKGFyZykgPT4gdGhpcy5jb250YWluc1ZhcmlhYmxlKGFyZywgdmFyTmFtZSkpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Y2FzZSBcImJpbmFyeVwiOlxuXHRcdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5zVmFyaWFibGUoZXhwci5sZWZ0LCB2YXJOYW1lKSB8fFxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWluc1ZhcmlhYmxlKGV4cHIucmlnaHQsIHZhck5hbWUpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Y2FzZSBcImlmXCI6XG5cdFx0XHRcdFx0cmV0dXJuIChcblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbnNWYXJpYWJsZShleHByLmNvbmRpdGlvbiwgdmFyTmFtZSkgfHxcblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbnNWYXJpYWJsZShleHByLnRoZW4sIHZhck5hbWUpIHx8XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5zVmFyaWFibGUoZXhwci5lbHNlLCB2YXJOYW1lKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdGNhc2UgXCJkZWZpbml0aW9uXCI6XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGFpbnNWYXJpYWJsZShleHByLnZhbHVlLCB2YXJOYW1lKTtcblx0XHRcdFx0Y2FzZSBcIm11dGFibGUtZGVmaW5pdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5zVmFyaWFibGUoZXhwci52YWx1ZSwgdmFyTmFtZSk7XG5cdFx0XHRcdGNhc2UgXCJtdXRhdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XHRleHByLnRhcmdldCA9PT0gdmFyTmFtZSB8fFxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWluc1ZhcmlhYmxlKGV4cHIudmFsdWUsIHZhck5hbWUpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Y2FzZSBcInJlY29yZFwiOlxuXHRcdFx0XHRcdHJldHVybiBleHByLmZpZWxkcy5zb21lKChmaWVsZCkgPT5cblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbnNWYXJpYWJsZShmaWVsZC52YWx1ZSwgdmFyTmFtZSksXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Y2FzZSBcInR1cGxlXCI6XG5cdFx0XHRcdFx0cmV0dXJuIGV4cHIuZWxlbWVudHMuc29tZSgoZWxlbWVudCkgPT5cblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbnNWYXJpYWJsZShlbGVtZW50LCB2YXJOYW1lKSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRjYXNlIFwibGlzdFwiOlxuXHRcdFx0XHRcdHJldHVybiBleHByLmVsZW1lbnRzLnNvbWUoKGVsZW1lbnQpID0+XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5zVmFyaWFibGUoZWxlbWVudCwgdmFyTmFtZSksXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Y2FzZSBcInBpcGVsaW5lXCI6XG5cdFx0XHRcdFx0cmV0dXJuIGV4cHIuc3RlcHMuc29tZSgoc3RlcCkgPT5cblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbnNWYXJpYWJsZShzdGVwLCB2YXJOYW1lKSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRjYXNlIFwiaW1wb3J0XCI6XG5cdFx0XHRcdGNhc2UgXCJhY2Nlc3NvclwiOlxuXHRcdFx0XHRjYXNlIFwibGl0ZXJhbFwiOlxuXHRcdFx0XHRjYXNlIFwidW5pdFwiOlxuXHRcdFx0XHRjYXNlIFwidHlwZWRcIjpcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEVmZmljaWVudCBlbnZpcm9ubWVudCBzdGFjayBtYW5hZ2VtZW50XG5cdFx0cHJpdmF0ZSBwdXNoRW52aXJvbm1lbnQoKTogdm9pZCB7XG5cdFx0XHR0aGlzLmVudmlyb25tZW50U3RhY2sucHVzaCh0aGlzLmVudmlyb25tZW50KTtcblx0XHRcdHRoaXMuZW52aXJvbm1lbnQgPSBuZXcgTWFwKHRoaXMuZW52aXJvbm1lbnQpO1xuXHRcdH1cblxuXHRcdHByaXZhdGUgcG9wRW52aXJvbm1lbnQoKTogdm9pZCB7XG5cdFx0XHRpZiAodGhpcy5lbnZpcm9ubWVudFN0YWNrWzBdKSB7XG5cdFx0XHRcdC8vIGJpb21lLWlnbm9yZSBsaW50L3N0eWxlL25vTm9uTnVsbEFzc2VydGlvbjogd2UgY2hlY2tlZFxuXHRcdFx0XHR0aGlzLmVudmlyb25tZW50ID0gdGhpcy5lbnZpcm9ubWVudFN0YWNrLnBvcCgpITtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRwcml2YXRlIHdpdGhOZXdFbnZpcm9ubWVudDxUPihmbjogKCkgPT4gVCk6IFQge1xuXHRcdFx0dGhpcy5wdXNoRW52aXJvbm1lbnQoKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBmbigpO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0dGhpcy5wb3BFbnZpcm9ubWVudCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdldCB0aGUgY3VycmVudCBlbnZpcm9ubWVudCAodXNlZnVsIGZvciBkZWJ1Z2dpbmcpXG5cdFx0Z2V0RW52aXJvbm1lbnQoKTogTWFwPHN0cmluZywgVmFsdWU+IHtcblx0XHRcdHJldHVybiBuZXcgTWFwKFxuXHRcdFx0XHRBcnJheS5mcm9tKHRoaXMuZW52aXJvbm1lbnQuZW50cmllcygpKS5tYXAoKFtrLCB2XSkgPT4gW1xuXHRcdFx0XHRcdGssXG5cdFx0XHRcdFx0aXNDZWxsKHYpID8gdi52YWx1ZSA6IHYsXG5cdFx0XHRcdF0pLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRwcml2YXRlIGV4cHJlc3Npb25Ub1N0cmluZyhleHByOiBFeHByZXNzaW9uKTogc3RyaW5nIHtcblx0XHRcdHN3aXRjaCAoZXhwci5raW5kKSB7XG5cdFx0XHRcdGNhc2UgXCJsaXRlcmFsXCI6XG5cdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZXhwci52YWx1ZSkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBgWyR7ZXhwci52YWx1ZVxuXHRcdFx0XHRcdFx0XHQubWFwKChlKSA9PiB0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhlIGFzIEV4cHJlc3Npb24pKVxuXHRcdFx0XHRcdFx0XHQuam9pbihcIiBcIil9XWA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcoZXhwci52YWx1ZSk7XG5cdFx0XHRcdGNhc2UgXCJ2YXJpYWJsZVwiOlxuXHRcdFx0XHRcdHJldHVybiBleHByLm5hbWU7XG5cdFx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiBgZm4gJHtleHByLnBhcmFtcy5qb2luKFwiIFwiKX0gPT4gJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhcblx0XHRcdFx0XHRcdGV4cHIuYm9keSxcblx0XHRcdFx0XHQpfWA7XG5cdFx0XHRcdGNhc2UgXCJhcHBsaWNhdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiBgJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhleHByLmZ1bmMpfSAke2V4cHIuYXJnc1xuXHRcdFx0XHRcdFx0Lm1hcCgoYXJnKSA9PiB0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhhcmcpKVxuXHRcdFx0XHRcdFx0LmpvaW4oXCIgXCIpfWA7XG5cdFx0XHRcdGNhc2UgXCJwaXBlbGluZVwiOlxuXHRcdFx0XHRcdHJldHVybiBleHByLnN0ZXBzXG5cdFx0XHRcdFx0XHQubWFwKChzdGVwKSA9PiB0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhzdGVwKSlcblx0XHRcdFx0XHRcdC5qb2luKFwiIHwgXCIpO1xuXHRcdFx0XHRjYXNlIFwiYmluYXJ5XCI6XG5cdFx0XHRcdFx0cmV0dXJuIGAke3RoaXMuZXhwcmVzc2lvblRvU3RyaW5nKGV4cHIubGVmdCl9ICR7XG5cdFx0XHRcdFx0XHRleHByLm9wZXJhdG9yXG5cdFx0XHRcdFx0fSAke3RoaXMuZXhwcmVzc2lvblRvU3RyaW5nKGV4cHIucmlnaHQpfWA7XG5cdFx0XHRcdGNhc2UgXCJpZlwiOlxuXHRcdFx0XHRcdHJldHVybiBgaWYgJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhcblx0XHRcdFx0XHRcdGV4cHIuY29uZGl0aW9uLFxuXHRcdFx0XHRcdCl9IHRoZW4gJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhcblx0XHRcdFx0XHRcdGV4cHIudGhlbixcblx0XHRcdFx0XHQpfSBlbHNlICR7dGhpcy5leHByZXNzaW9uVG9TdHJpbmcoZXhwci5lbHNlKX1gO1xuXHRcdFx0XHRjYXNlIFwiZGVmaW5pdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiBgJHtleHByLm5hbWV9ID0gJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhleHByLnZhbHVlKX1gO1xuXHRcdFx0XHRjYXNlIFwibXV0YWJsZS1kZWZpbml0aW9uXCI6XG5cdFx0XHRcdFx0cmV0dXJuIGAke2V4cHIubmFtZX0gPSAke3RoaXMuZXhwcmVzc2lvblRvU3RyaW5nKGV4cHIudmFsdWUpfWA7XG5cdFx0XHRcdGNhc2UgXCJtdXRhdGlvblwiOlxuXHRcdFx0XHRcdHJldHVybiBgbXV0ICR7ZXhwci50YXJnZXR9ID0gJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhleHByLnZhbHVlKX1gO1xuXHRcdFx0XHRjYXNlIFwiaW1wb3J0XCI6XG5cdFx0XHRcdFx0cmV0dXJuIGBpbXBvcnQgXCIke2V4cHIucGF0aH1cImA7XG5cdFx0XHRcdGNhc2UgXCJyZWNvcmRcIjpcblx0XHRcdFx0XHRyZXR1cm4gYHsgJHtleHByLmZpZWxkc1xuXHRcdFx0XHRcdFx0Lm1hcChcblx0XHRcdFx0XHRcdFx0KGZpZWxkKSA9PlxuXHRcdFx0XHRcdFx0XHRcdGAke2ZpZWxkLm5hbWV9ID0gJHt0aGlzLmV4cHJlc3Npb25Ub1N0cmluZyhmaWVsZC52YWx1ZSl9YCxcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdC5qb2luKFwiLCBcIil9IH1gO1xuXHRcdFx0XHRjYXNlIFwiYWNjZXNzb3JcIjpcblx0XHRcdFx0XHRyZXR1cm4gYEAke2V4cHIuZmllbGR9YDtcblx0XHRcdFx0Y2FzZSBcIndoZXJlXCI6XG5cdFx0XHRcdFx0cmV0dXJuIGAke3RoaXMuZXhwcmVzc2lvblRvU3RyaW5nKGV4cHIubWFpbil9IHdoZXJlICgke2V4cHIuZGVmaW5pdGlvbnNcblx0XHRcdFx0XHRcdC5tYXAoKGQpID0+IHRoaXMuZXhwcmVzc2lvblRvU3RyaW5nKGQpKVxuXHRcdFx0XHRcdFx0LmpvaW4oXCI7IFwiKX0pYDtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gXCJ1bmtub3duXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSBldmFsdWF0ZVR5cGVEZWZpbml0aW9uKGV4cHI6IFR5cGVEZWZpbml0aW9uRXhwcmVzc2lvbik6IFZhbHVlIHtcblx0XHRcdC8vIFR5cGUgZGVmaW5pdGlvbnMgYWRkIGNvbnN0cnVjdG9ycyB0byB0aGUgZW52aXJvbm1lbnRcblx0XHRcdGZvciAoY29uc3QgX2NvbnN0cnVjdG9yIG9mIGV4cHIuY29uc3RydWN0b3JzKSB7XG5cdFx0XHRcdGlmIChfY29uc3RydWN0b3IuYXJncy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHQvLyBOdWxsYXJ5IGNvbnN0cnVjdG9yOiBqdXN0IGNyZWF0ZSB0aGUgY29uc3RydWN0b3IgdmFsdWVcblx0XHRcdFx0XHRjb25zdCBjb25zdHJ1Y3RvclZhbHVlID0ge1xuXHRcdFx0XHRcdFx0dGFnOiBcImNvbnN0cnVjdG9yXCIsXG5cdFx0XHRcdFx0XHRuYW1lOiBfY29uc3RydWN0b3IubmFtZSxcblx0XHRcdFx0XHRcdGFyZ3M6IFtdLFxuXHRcdFx0XHRcdH0gYXMgVmFsdWU7XG5cdFx0XHRcdFx0dGhpcy5lbnZpcm9ubWVudC5zZXQoX2NvbnN0cnVjdG9yLm5hbWUsIGNvbnN0cnVjdG9yVmFsdWUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBhIHNpbXBsZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IGNvbGxlY3RzIGFsbCBhcmd1bWVudHNcblx0XHRcdFx0XHRjb25zdCBjcmVhdGVDdXJyaWVkQ29uc3RydWN0b3IgPSAoYXJpdHk6IG51bWJlciwgbmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb2xsZWN0QXJncyA9IChjb2xsZWN0ZWRBcmdzOiBWYWx1ZVtdID0gW10pOiBWYWx1ZSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVGdW5jdGlvbigobmV4dEFyZzogVmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdBcmdzID0gWy4uLmNvbGxlY3RlZEFyZ3MsIG5leHRBcmddO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXdBcmdzLmxlbmd0aCA9PT0gYXJpdHkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB7IHRhZzogXCJjb25zdHJ1Y3RvclwiLCBuYW1lLCBhcmdzOiBuZXdBcmdzIH0gYXMgVmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjb2xsZWN0QXJncyhuZXdBcmdzKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJldHVybiBjb2xsZWN0QXJncygpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChcblx0XHRcdFx0XHRcdF9jb25zdHJ1Y3Rvci5uYW1lLFxuXHRcdFx0XHRcdFx0Y3JlYXRlQ3VycmllZENvbnN0cnVjdG9yKFxuXHRcdFx0XHRcdFx0XHRfY29uc3RydWN0b3IuYXJncy5sZW5ndGgsXG5cdFx0XHRcdFx0XHRcdF9jb25zdHJ1Y3Rvci5uYW1lLFxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFR5cGUgZGVmaW5pdGlvbnMgZXZhbHVhdGUgdG8gdW5pdFxuXHRcdFx0cmV0dXJuIGNyZWF0ZVVuaXQoKTtcblx0XHR9XG5cblx0XHRwcml2YXRlIGV2YWx1YXRlTWF0Y2goZXhwcjogTWF0Y2hFeHByZXNzaW9uKTogVmFsdWUge1xuXHRcdFx0Ly8gRXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gYmVpbmcgbWF0Y2hlZFxuXHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihleHByLmV4cHJlc3Npb24pO1xuXG5cdFx0XHQvLyBUcnkgZWFjaCBjYXNlIHVudGlsIG9uZSBtYXRjaGVzXG5cdFx0XHRmb3IgKGNvbnN0IG1hdGNoQ2FzZSBvZiBleHByLmNhc2VzKSB7XG5cdFx0XHRcdGNvbnN0IG1hdGNoUmVzdWx0ID0gdGhpcy50cnlNYXRjaFBhdHRlcm4obWF0Y2hDYXNlLnBhdHRlcm4sIHZhbHVlKTtcblx0XHRcdFx0aWYgKG1hdGNoUmVzdWx0Lm1hdGNoZWQpIHtcblx0XHRcdFx0XHQvLyBVc2UgZW52aXJvbm1lbnQgc3RhY2tpbmcgZm9yIHBhdHRlcm4gYmluZGluZ3Ncblx0XHRcdFx0XHRyZXR1cm4gdGhpcy53aXRoTmV3RW52aXJvbm1lbnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gQWRkIGJpbmRpbmdzIHRvIGVudmlyb25tZW50XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtuYW1lLCBib3VuZFZhbHVlXSBvZiBtYXRjaFJlc3VsdC5iaW5kaW5ncykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmVudmlyb25tZW50LnNldChuYW1lLCBib3VuZFZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIEV2YWx1YXRlIHRoZSBjYXNlIGV4cHJlc3Npb25cblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihtYXRjaENhc2UuZXhwcmVzc2lvbik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gcGF0dGVybiBtYXRjaGVkIGluIG1hdGNoIGV4cHJlc3Npb25cIik7XG5cdFx0fVxuXG5cdFx0cHJpdmF0ZSB0cnlNYXRjaFBhdHRlcm4oXG5cdFx0XHRwYXR0ZXJuOiBQYXR0ZXJuLFxuXHRcdFx0dmFsdWU6IFZhbHVlLFxuXHRcdCk6IHsgbWF0Y2hlZDogYm9vbGVhbjsgYmluZGluZ3M6IE1hcDxzdHJpbmcsIFZhbHVlPiB9IHtcblx0XHRcdGNvbnN0IGJpbmRpbmdzID0gbmV3IE1hcDxzdHJpbmcsIFZhbHVlPigpO1xuXG5cdFx0XHRzd2l0Y2ggKHBhdHRlcm4ua2luZCkge1xuXHRcdFx0XHRjYXNlIFwid2lsZGNhcmRcIjpcblx0XHRcdFx0XHQvLyBXaWxkY2FyZCBhbHdheXMgbWF0Y2hlc1xuXHRcdFx0XHRcdHJldHVybiB7IG1hdGNoZWQ6IHRydWUsIGJpbmRpbmdzIH07XG5cblx0XHRcdFx0Y2FzZSBcInZhcmlhYmxlXCI6XG5cdFx0XHRcdFx0Ly8gVmFyaWFibGUgYWx3YXlzIG1hdGNoZXMgYW5kIGJpbmRzIHRoZSB2YWx1ZVxuXHRcdFx0XHRcdGJpbmRpbmdzLnNldChwYXR0ZXJuLm5hbWUsIHZhbHVlKTtcblx0XHRcdFx0XHRyZXR1cm4geyBtYXRjaGVkOiB0cnVlLCBiaW5kaW5ncyB9O1xuXG5cdFx0XHRcdGNhc2UgXCJjb25zdHJ1Y3RvclwiOiB7XG5cdFx0XHRcdFx0Ly8gQ29uc3RydWN0b3IgcGF0dGVybiBvbmx5IG1hdGNoZXMgY29uc3RydWN0b3IgdmFsdWVzXG5cdFx0XHRcdFx0aWYgKHZhbHVlLnRhZyAhPT0gXCJjb25zdHJ1Y3RvclwiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBtYXRjaGVkOiBmYWxzZSwgYmluZGluZ3MgfTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBDaGVjayBjb25zdHJ1Y3RvciBuYW1lXG5cdFx0XHRcdFx0aWYgKHZhbHVlLm5hbWUgIT09IHBhdHRlcm4ubmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgbWF0Y2hlZDogZmFsc2UsIGJpbmRpbmdzIH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgYXJndW1lbnQgY291bnRcblx0XHRcdFx0XHRpZiAocGF0dGVybi5hcmdzLmxlbmd0aCAhPT0gdmFsdWUuYXJncy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG1hdGNoZWQ6IGZhbHNlLCBiaW5kaW5ncyB9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE1hdGNoIGVhY2ggYXJndW1lbnRcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhdHRlcm4uYXJncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc3QgYXJnTWF0Y2ggPSB0aGlzLnRyeU1hdGNoUGF0dGVybihcblx0XHRcdFx0XHRcdFx0cGF0dGVybi5hcmdzW2ldLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZS5hcmdzW2ldLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmICghYXJnTWF0Y2gubWF0Y2hlZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4geyBtYXRjaGVkOiBmYWxzZSwgYmluZGluZ3MgfTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTWVyZ2UgYmluZGluZ3Ncblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW25hbWUsIGJvdW5kVmFsdWVdIG9mIGFyZ01hdGNoLmJpbmRpbmdzKSB7XG5cdFx0XHRcdFx0XHRcdGJpbmRpbmdzLnNldChuYW1lLCBib3VuZFZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4geyBtYXRjaGVkOiB0cnVlLCBiaW5kaW5ncyB9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2FzZSBcImxpdGVyYWxcIjoge1xuXHRcdFx0XHRcdC8vIExpdGVyYWwgcGF0dGVybiBtYXRjaGVzIGlmIHZhbHVlcyBhcmUgZXF1YWxcblx0XHRcdFx0XHRsZXQgbWF0Y2hlcyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBwYXR0ZXJuLnZhbHVlID09PSBcIm51bWJlclwiICYmIGlzTnVtYmVyKHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHBhdHRlcm4udmFsdWUgPT09IHZhbHVlLnZhbHVlO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4udmFsdWUgPT09IFwic3RyaW5nXCIgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVzID0gcGF0dGVybi52YWx1ZSA9PT0gdmFsdWUudmFsdWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHsgbWF0Y2hlZDogbWF0Y2hlcywgYmluZGluZ3MgfTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0YFVuc3VwcG9ydGVkIHBhdHRlcm4ga2luZDogJHsocGF0dGVybiBhcyBQYXR0ZXJuKS5raW5kfWAsXG5cdFx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuLy8gTW92ZSB2YWx1ZVRvU3RyaW5nIHRvIGEgc3RhbmRhbG9uZSBmdW5jdGlvblxuZnVuY3Rpb24gdmFsdWVUb1N0cmluZyh2YWx1ZTogVmFsdWUpOiBzdHJpbmcge1xuXHRpZiAoaXNOdW1iZXIodmFsdWUpKSB7XG5cdFx0cmV0dXJuIFN0cmluZyh2YWx1ZS52YWx1ZSk7XG5cdH0gZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG5cdFx0cmV0dXJuIGBcIiR7dmFsdWUudmFsdWV9XCJgO1xuXHR9IGVsc2UgaWYgKGlzQm9vbCh2YWx1ZSkpIHtcblx0XHRyZXR1cm4gYm9vbFZhbHVlKHZhbHVlKSA/IFwiVHJ1ZVwiIDogXCJGYWxzZVwiO1xuXHR9IGVsc2UgaWYgKGlzTGlzdCh2YWx1ZSkpIHtcblx0XHRyZXR1cm4gYFske3ZhbHVlLnZhbHVlcy5tYXAodmFsdWVUb1N0cmluZykuam9pbihcIjsgXCIpfV1gO1xuXHR9IGVsc2UgaWYgKGlzVHVwbGUodmFsdWUpKSB7XG5cdFx0cmV0dXJuIGB7JHt2YWx1ZS52YWx1ZXMubWFwKHZhbHVlVG9TdHJpbmcpLmpvaW4oXCI7IFwiKX19YDtcblx0fSBlbHNlIGlmIChpc1JlY29yZCh2YWx1ZSkpIHtcblx0XHRjb25zdCBmaWVsZHMgPSBPYmplY3QuZW50cmllcyh2YWx1ZS5maWVsZHMpXG5cdFx0XHQubWFwKChbaywgdl0pID0+IGBAJHtrfSAke3ZhbHVlVG9TdHJpbmcodil9YClcblx0XHRcdC5qb2luKFwiOyBcIik7XG5cdFx0cmV0dXJuIGB7JHtmaWVsZHN9fWA7XG5cdH0gZWxzZSBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRyZXR1cm4gXCI8ZnVuY3Rpb24+XCI7XG5cdH0gZWxzZSBpZiAoaXNOYXRpdmVGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRyZXR1cm4gYDxuYXRpdmU6JHt2YWx1ZS5uYW1lfT5gO1xuXHR9IGVsc2UgaWYgKGlzQ29uc3RydWN0b3IodmFsdWUpKSB7XG5cdFx0aWYgKHZhbHVlLmFyZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUubmFtZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGAke3ZhbHVlLm5hbWV9ICR7dmFsdWUuYXJncy5tYXAodmFsdWVUb1N0cmluZykuam9pbihcIiBcIil9YDtcblx0XHR9XG5cdH0gZWxzZSBpZiAoaXNVbml0KHZhbHVlKSkge1xuXHRcdHJldHVybiBcInVuaXRcIjtcblx0fVxuXHRyZXR1cm4gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==