# Test environment isolation

# First, define a global variable
testVar = 42;

# Extract a record with a variable that shadows the global one
extract { @testVar 100; @extractedVar 200 };

# Use the shadowed variable
result1 = testVar;      # Should be 100 (local shadows global)
result2 = extractedVar; # Should be 200 (local only)

# After this evaluation, the local environment should be cleared
# So testVar should return to its global value (42) in a new context

{ @result1 result1;
  @result2 result2 } 